{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Login.js","components/Register.js","components/Reset.js","components/Dashboard.js","components/ReadOnlyRow.js","components/EditableRow.js","assets/winner-cup.png","components/NewGame.js","components/RegisterPlayer.js","components/GameHistory.js","components/PieChart.js","components/GameStats.js","components/OldGame.js","components/App.js","index.js"],"names":["app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","getAuth","db","getFirestore","googleProvider","GoogleAuthProvider","signInWithGoogle","a","signInWithPopup","res","user","q","query","collection","where","uid","getDocs","docs","length","addDoc","name","displayName","authProvider","email","console","error","alert","message","logInWithEmailAndPassword","password","signInWithEmailAndPassword","registerWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordReset","sendPasswordResetEmail","logout","signOut","registerPlayer","player","getRegisteredPlayers","players","forEach","doc","push","data","sort","p1","p2","id","savePlayers","playersObj","Object","assign","getPlayers","saveRoundData","roundData","Date","now","updateRoundData","d","docRef","updateDoc","deleteRoundData","roundId","deleteDoc","deleteGame","docId","gameQuery","gameDoc","log","getGameData","gameData","round1","round2","roundNumber","saveGame","saveGameHistory","playersQuery","keys","playerTotals","rounds","round","Number","playerRanking","total","gameHistory","utcDateMS","winner","discardGame","getGameHistoryData","gameHistoryData","game","gameDate","date","getMonth","getDate","getFullYear","roundsData","winnerScore","runner","runnerScore","game1","game2","AuthContext","React","createContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","value","signup","Provider","Login","setEmail","setPassword","useAuthState","navigate","useNavigate","className","type","onChange","e","target","placeholder","onClick","to","Register","setName","Reset","Dashboard","isPlayer","setIsPlayer","isAdmin","setIsAdmin","fetchUserName","gameInProgress","setGameInProgress","class","ReadOnlyRow","roundIndex","handleEditClick","handleDeleteClick","oldGame","subRoundTotal","playerSubScores","i","playerSubScoresTemp","map","event","points","style","EditableRow","editRoundData","handleEditRoundChange","handleCancelClick","key","idx","required","NewGame","registeredPlayers","setRegisteredPlayers","setPlayers","playerName","setPlayerName","setRounds","addRoundData","setAddRoundData","allPlayersAdded","setAllPlayersAdded","playerScores","setPlayerScores","gameOver","setGameOver","setWinner","regsiteredPlayers","savedPlayers","tempSavedPlayers","playerScoresTemp","lowScore","savePlayersHandler","preventDefault","setEditRoundData","editRoundId","setEditRoundId","index","fieldValue","newRoundData","handleAddRoundSubmit","newRound","nanoid","newRounds","window","location","reload","handleEditRoundSubmit","editedRound","findIndex","roundValues","splice","saveGameHandler","discardGameHandler","leadingPlayer","leadingScore","getWinningPlayer","src","WinnerCup","width","height","getLosingPlayer","display","flexDirection","onSubmit","includes","marginRight","disabled","handleAddRoundChange","RegisterPlayer","handleRegisterPlayerSubmit","GameHistory","setGameHistory","color","href","PieChart","props","outerRadius","innerRadius","colorScale","d3","select","remove","svg","append","attr","arcGenerator","pieGenerator","padAngle","arc","selectAll","enter","_","text","label","centroid","x","y","drawChart","GameStats","playerWinnerRunner","setPlayerWinnerRunner","playerGameCombo","setPlayerGameCombo","winnerChartData","setWinnerChartData","runnerChartData","setRunnerChartData","outChartData","setOutChartData","getLexicographicallySmallestRotation","n","smallestRotation","join","rotation","slice","concat","playerWinnerCount","playerRunnerCount","playerOutCount","playerGameCount","gameWinsCount","winCount","runnerCount","out","outCount","gameCount","gameWin","gameWinCount","playerGameComboKey","games","gameWinPlayers","split","gameWinPlayersSorted","gameWinPlayersSortedKey","gameWinsCountEntries","entries","g1","g2","sortedGameWinsCount","reduce","acc","playerGameComboObj","playerDealerCount","playerSeatingCount","playerSeatingGames","playerNormalizedSeatingCount","playerNormalizedSeatingGames","dealer","dealerCount","seatingKey","seatingCount","normalizedSeatingKey","normalizedSeatingCount","playerSeatingCountStats","playerNormalizedSeatingCountStats","gamesPlayed","winPercentage","Math","runnerPercentage","outPercentage","playerSeatingGamesObj","sortedPlayerWinnerCount","sortedPlayerRunnerCount","sortedPlayerOutCount","playerNormalizedSeatingGamesObj","gameWins","playersParticipated","g","obj","wins","playerStats","rummys","drops","outs","seventyFives","document","getElementsByClassName","addEventListener","this","classList","toggle","panel","nextElementSibling","marginTop","marginBottom","playerSeating","seatingIndex","OldGame","setGame","setPlayerStats","gameId","useParams","find","handleDeleteGame","playerRank","App","Container","minHeight","maxWidth","basename","exact","path","element","ReactDOM","render","StrictMode","getElementById"],"mappings":"4QAuBMA,EAAMC,YAAc,CACxBC,OAAQC,0CACRC,WAAYD,sCACZE,UAAWF,sBACXG,cAAeH,kCACfI,kBAAmBJ,eACnBK,MAAOL,8CAGHM,EAAOC,YAAQV,GACfW,EAAKC,YAAaZ,GAElBa,EAAiB,IAAIC,IACrBC,EAAgB,uCAAG,gCAAAC,EAAA,+EAEHC,YAAgBR,EAAMI,GAFnB,cAEfK,EAFe,OAGfC,EAAOD,EAAIC,KACXC,EAAIC,YAAMC,YAAWX,EAAI,SAAUY,YAAM,MAAO,KAAMJ,EAAKK,MAJ5C,SAKFC,YAAQL,GALN,UAMI,IANJ,OAMZM,KAAKC,OANO,kCAObC,YAAON,YAAWX,EAAI,SAAU,CACpCa,IAAKL,EAAKK,IACVK,KAAMV,EAAKW,YACXC,aAAc,SACdC,MAAOb,EAAKa,QAXK,0DAerBC,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAhBW,0DAAH,qDAoBhBC,EAAyB,uCAAG,WAAOL,EAAOM,GAAd,SAAAtB,EAAA,+EAExBuB,YAA2B9B,EAAMuB,EAAOM,GAFhB,sDAI9BL,QAAQC,MAAR,MACAC,MAAM,KAAIC,SALoB,wDAAH,wDASzBI,EAA4B,uCAAG,WAAOX,EAAMG,EAAOM,GAApB,iBAAAtB,EAAA,+EAEfyB,YAA+BhC,EAAMuB,EAAOM,GAF7B,cAE3BpB,EAF2B,OAG3BC,EAAOD,EAAIC,KAHgB,SAI3BS,YAAON,YAAWX,EAAI,SAAU,CACpCa,IAAKL,EAAKK,IACVK,OACAE,aAAc,QACdC,UAR+B,uDAWjCC,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAZuB,yDAAH,0DAgB5BM,EAAiB,uCAAG,WAAOV,GAAP,SAAAhB,EAAA,+EAEhB2B,YAAuBlC,EAAMuB,GAFb,OAGtBG,MAAM,6BAHgB,gDAKtBF,QAAQC,MAAR,MACAC,MAAM,KAAIC,SANY,yDAAH,sDAUjBQ,EAAS,WACbC,YAAQpC,IAGJqC,EAAc,uCAAG,WAAOC,GAAP,SAAA/B,EAAA,+EAIbY,YAAON,YAAWX,EAAI,sBAAuBoC,GAJhC,sDAMnBd,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAPS,wDAAH,sDAWdY,EAAoB,uCAAG,8BAAAhC,EAAA,6DACrBiC,EAAU,GADW,SAGnB7B,EAAIC,YAAMC,YAAWX,EAAI,uBAHN,SAINc,YAAQL,GAJF,cAKpB8B,SAAQ,SAACC,GAAS,IAAD,EACpBF,EAAQG,KAAR,OAAaD,QAAb,IAAaA,GAAb,UAAaA,EAAKE,cAAlB,aAAa,EAAaxB,SANH,gDASzBI,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAVe,yBAYlB,OAAPa,QAAO,IAAPA,KAASK,MAAK,SAACC,EAAIC,GAAL,OAAc,OAAFD,QAAE,IAAFA,OAAA,EAAAA,EAAIE,KAAJ,OAASD,QAAT,IAASA,OAAT,EAASA,EAAIC,OAZd,kBAalBR,GAbkB,+DAAH,qDAiBpBS,EAAW,uCAAG,WAAOT,GAAP,eAAAjC,EAAA,sEAEZ2C,EAAa,GACjBC,OAAOC,OAAOF,EAAYV,GAHV,SAIVrB,YAAON,YAAWX,EAAI,WAAYgD,GAJxB,uDAMhB1B,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAPM,yDAAH,sDAWX0B,EAAU,uCAAG,8BAAA9C,EAAA,6DACXiC,EAAU,GADC,SAGT7B,EAAIC,YAAMC,YAAWX,EAAI,YAHhB,SAIIc,YAAQL,GAJZ,cAKV8B,SAAQ,SAACC,GACZF,EAAQG,KAAKD,EAAIE,WANJ,gDASfpB,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAVK,2CAYRa,GAZQ,+DAAH,qDAgBVc,EAAa,uCAAG,WAAOC,GAAP,SAAAhD,EAAA,sEAElBgD,EAAS,YAAkBC,KAAKC,MAFd,SAGZtC,YAAON,YAAWX,EAAI,QAASqD,GAHnB,uDAKlB/B,QAAQC,MAAR,MACAC,MAAM,KAAIC,SANQ,yDAAH,sDAUb+B,EAAe,uCAAG,WAAOH,GAAP,eAAAhD,EAAA,sEAEdI,EAAIC,YAAMC,YAAWX,EAAI,QAASY,YAAM,KAAM,KAAMyC,EAAUP,KAFhD,SAGDhC,YAAQL,GAHP,cAIf8B,QAAL,uCAAa,WAAOkB,GAAP,eAAApD,EAAA,6DACLqD,EAASlB,YAAIxC,EAAI,OAAQyD,EAAEX,IADtB,SAELa,YAAUD,EAAQL,GAFb,2CAAb,uDAJoB,gDASpB/B,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAVU,yDAAH,sDAcfmC,EAAe,uCAAG,WAAOC,GAAP,eAAAxD,EAAA,sEAEdI,EAAIC,YAAMC,YAAWX,EAAI,QAASY,YAAM,KAAM,KAAMiD,IAFtC,SAGD/C,YAAQL,GAHP,cAIf8B,QAAL,uCAAa,WAAOkB,GAAP,eAAApD,EAAA,6DACLqD,EAASlB,YAAIxC,EAAI,OAAQyD,EAAEX,IADtB,SAELgB,YAAUJ,GAFL,2CAAb,uDAJoB,gDASpBpC,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAVU,yDAAH,sDAcfsC,EAAU,uCAAG,WAAOC,GAAP,mBAAA3D,EAAA,sEAET4D,EAAYvD,YAAMC,YAAWX,EAAI,gBAAiBY,YAAM,KAAM,KAAMoD,IAF3D,SAGOlD,YAAQmD,GAHf,cAGTC,EAHS,OAIf5C,QAAQ6C,IAAID,GACNR,EAASlB,YAAIxC,EAAI,eAAgBgE,GACvC1C,QAAQ6C,IAAIT,GANG,UAOTI,YAAUJ,GAPD,0DASfpC,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAVK,0DAAH,sDAcV2C,EAAW,uCAAG,8BAAA/D,EAAA,6DACZgE,EAAW,GADC,SAGV5D,EAAIC,YAAMC,YAAWX,EAAI,SAHf,SAIGc,YAAQL,GAJX,cAKX8B,SAAQ,SAACC,GACZ6B,EAAS5B,KAAKD,EAAIE,WAEZ,OAAR2B,QAAQ,IAARA,KAAU1B,MAAK,SAAC2B,EAAQC,GAAT,OAA0B,OAAND,QAAM,IAANA,OAAA,EAAAA,EAAQE,cAAR,OAAsBD,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAQC,gBARjD,kDAUhBlD,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAXM,2CAaT4C,GAbS,gEAAH,qDAiBXI,EAAQ,uCAAG,8BAAApE,EAAA,+EAEPqE,IAFO,cAGPT,EAAYvD,YAAMC,YAAWX,EAAI,SAH1B,SAIUc,YAAQmD,GAJlB,qBAKJ1B,QAAT,uCAAiB,WAAOkB,GAAP,eAAApD,EAAA,6DACTqD,EAASlB,YAAIxC,EAAI,OAAQyD,EAAEX,IADlB,SAETgB,YAAUJ,GAFD,2CAAjB,uDAIMiB,EAAejE,YAAMC,YAAWX,EAAI,YAT7B,UAUYc,YAAQ6D,GAVpB,eAWFpC,QAAX,uCAAmB,WAAOkB,GAAP,eAAApD,EAAA,6DACXqD,EAASlB,YAAIxC,EAAI,UAAWyD,EAAEX,IADnB,SAEXgB,YAAUJ,GAFC,2CAAnB,uDAXa,kDAgBbpC,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAjBG,0DAAH,qDAqBRiD,EAAe,uCAAG,0CAAArE,EAAA,sEAGdiC,EAAU,GAEVqC,EAAejE,YAAMC,YAAWX,EAAI,YALtB,SAMKc,YAAQ6D,GANb,qBAOTpC,QAAX,uCAAmB,WAAOkB,GAAP,iBAAApD,EAAA,sDACX2C,EADW,OACES,QADF,IACEA,OADF,EACEA,EAAGf,OACtB,UAAAO,OAAO2B,KAAK5B,UAAZ,SAAyBT,SAAQ,SAAAH,GAC/BE,EAAQG,KAAKO,EAAWZ,OAHT,2CAAnB,uDAQMyC,EAAe,GACd,OAAPvC,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GAAM,OAAIyC,EAAazC,GAAU,KAG5C0C,EAAS,GACTb,EAAYvD,YAAMC,YAAWX,EAAI,SApBnB,UAqBGc,YAAQmD,GArBX,sBAsBX1B,QAAT,uCAAiB,WAAOkB,GAAP,eAAApD,EAAA,sDACT0E,EADS,OACDtB,QADC,IACDA,OADC,EACDA,EAAGf,OACjBoC,EAAOrC,KAAKsC,GACL,OAAPzC,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACfyC,EAAazC,IAAW4C,OAAOD,EAAM3C,OAJxB,2CAAjB,uDAOM,OAAN0C,QAAM,IAANA,KAAQnC,MAAK,SAAC2B,EAAQC,GAAT,OAA0B,OAAND,QAAM,IAANA,OAAA,EAAAA,EAAQE,cAAR,OAAsBD,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAQC,gBAEzDS,EAAgB,GACf,OAAP3C,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACf6C,EAAcxC,KAAK,CACjBvB,KAAMkB,EACN8C,MAAOL,EAAazC,QAGX,OAAb6C,QAAa,IAAbA,KAAetC,MAAK,SAACC,EAAIC,GAAL,OAAc,OAAFD,QAAE,IAAFA,OAAA,EAAAA,EAAIsC,QAAJ,OAAYrC,QAAZ,IAAYA,OAAZ,EAAYA,EAAIqC,UAE1CC,EAAc,CAClBC,UAAW9B,KAAKC,MAChBuB,SACAxC,UACA2C,gBACAI,OAAM,UAAEJ,EAAc,UAAhB,aAAE,EAAkB/D,MA7CR,UAgDdD,YAAON,YAAWX,EAAI,gBAAiBmF,GAhDzB,0DAkDpB7D,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAnDU,0DAAH,qDAuDf6D,EAAW,uCAAG,8BAAAjF,EAAA,sEAEV4D,EAAYvD,YAAMC,YAAWX,EAAI,SAFvB,SAGOc,YAAQmD,GAHf,qBAIP1B,QAAT,uCAAiB,WAAOkB,GAAP,eAAApD,EAAA,6DACTqD,EAASlB,YAAIxC,EAAI,OAAQyD,EAAEX,IADlB,SAETgB,YAAUJ,GAFD,2CAAjB,uDAIMiB,EAAejE,YAAMC,YAAWX,EAAI,YAR1B,SASSc,YAAQ6D,GATjB,cAULpC,QAAX,uCAAmB,WAAOkB,GAAP,eAAApD,EAAA,6DACXqD,EAASlB,YAAIxC,EAAI,UAAWyD,EAAEX,IADnB,SAEXgB,YAAUJ,GAFC,2CAAnB,uDAVgB,kDAehBpC,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAhBM,0DAAH,qDAoBX8D,EAAkB,uCAAG,8BAAAlF,EAAA,6DACnBmF,EAAkB,GADC,SAGjB/E,EAAIC,YAAMC,YAAWX,EAAI,iBAHR,SAIJc,YAAQL,GAJJ,cAKlB8B,SAAQ,SAACC,GAAS,IAAD,cACdiD,EAAOjD,EAAIE,OACXgD,EAAW,IAAIpC,KAAJ,OAASmC,QAAT,IAASA,OAAT,EAASA,EAAML,WAChCI,EAAgB/C,KAAK,CACnBuB,MAAOxB,EAAIM,GACXsC,UAAS,OAAEK,QAAF,IAAEA,OAAF,EAAEA,EAAML,UACjBH,cAAa,OAAEQ,QAAF,IAAEA,OAAF,EAAEA,EAAMR,cACrB3C,QAAO,OAAEmD,QAAF,IAAEA,OAAF,EAAEA,EAAMnD,QACfqD,KAAOD,EAASE,WAAW,EAAK,IAAMF,EAASG,UAAY,IAAMH,EAASI,cAC1EhB,OAAM,OAAEW,QAAF,IAAEA,GAAF,UAAEA,EAAMX,cAAR,aAAE,EAAc9D,OACtB+E,WAAU,OAAEN,QAAF,IAAEA,OAAF,EAAEA,EAAMX,OAClBO,OAAM,OAAEI,QAAF,IAAEA,OAAF,EAAEA,EAAMJ,OACdW,YAAW,OAAEP,QAAF,IAAEA,GAAF,UAAEA,EAAMR,qBAAR,iBAAE,EAAsB,UAAxB,aAAE,EAA0BC,MACvCe,OAAM,OAAER,QAAF,IAAEA,GAAF,UAAEA,EAAMR,qBAAR,iBAAE,EAAsB,UAAxB,aAAE,EAA0B/D,KAClCgF,YAAW,OAAET,QAAF,IAAEA,GAAF,UAAEA,EAAMR,qBAAR,iBAAE,EAAsB,UAAxB,aAAE,EAA0BC,WAG5B,OAAfM,QAAe,IAAfA,KAAiB7C,MAAK,SAACwD,EAAOC,GAAR,OAAuB,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAOhB,YAAP,OAAmBe,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAOf,cAtB3C,kDAwBvB9D,QAAQC,MAAR,MACAC,MAAM,KAAIC,SAzBa,2CA2BhB+D,GA3BgB,gEAAH,qD,OCvTlBa,EAAcC,IAAMC,gBAMnB,SAASC,EAAT,GAAqC,IAAbC,EAAY,EAAZA,SAC3B,EAAsCC,qBAAtC,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KAMAC,qBAAU,WAMN,OALoBjH,EAAKkH,oBAAmB,SAAAxG,GACxCoG,EAAepG,GACfsG,GAAW,QAIhB,IAGH,IAAMG,EAAQ,CACVN,cACAO,OAhBJ,SAAgB7F,EAAOM,GACnB,OAAOG,YAA+BhC,EAAMuB,EAAOM,KAkBvD,OACI,cAAC0E,EAAYc,SAAb,CAAsBF,MAAOA,EAA7B,UACMJ,GAAWJ,I,wDCqBVW,MAnDf,WACE,MAA0BV,mBAAS,IAAnC,mBAAOrF,EAAP,KAAcgG,EAAd,KACA,EAAgCX,mBAAS,IAAzC,mBAAO/E,EAAP,KAAiB2F,EAAjB,KACA,EAA+BC,YAAazH,GAA5C,mBAAOU,EAAP,KAAaqG,EAAb,KACMW,GADN,KACiBC,eAQjB,OAPAV,qBAAU,WACJF,GAIArG,GAAMgH,EAAS,gBAClB,CAAChH,EAAMqG,IAER,qBAAKa,UAAU,QAAf,SACE,sBAAKA,UAAU,mBAAf,UACE,uBACEC,KAAK,OACLD,UAAU,MACVT,MAAO5F,EACPuG,SAAU,SAACC,GAAD,OAAOR,EAASQ,EAAEC,OAAOb,QACnCc,YAAY,mBAEd,uBACA,uBACEJ,KAAK,WACLD,UAAU,MACVT,MAAOtF,EACPiG,SAAU,SAACC,GAAD,OAAOP,EAAYO,EAAEC,OAAOb,QACtCc,YAAY,aAEd,uBACA,wBACEL,UAAU,sBACVM,QAAS,kBAAMtG,EAA0BL,EAAOM,IAFlD,mBAMA,uBACA,wBAAQ+F,UAAU,sBAAsBM,QAAS5H,EAAjD,+BAGA,8BACE,cAAC,IAAD,CAAM6H,GAAG,SAAT,+BAEF,0DACyB,cAAC,IAAD,CAAMA,GAAG,YAAT,sBADzB,iBCgBOC,MAxDf,WACE,MAA0BxB,mBAAS,IAAnC,mBAAOrF,EAAP,KAAcgG,EAAd,KACA,EAAgCX,mBAAS,IAAzC,mBAAO/E,EAAP,KAAiB2F,EAAjB,KACA,EAAwBZ,mBAAS,IAAjC,mBAAOxF,EAAP,KAAaiH,EAAb,KACA,EAA+BZ,YAAazH,GAA5C,mBAAOU,EAAP,KAAaqG,EAAb,KAEMW,GAFN,KAEiBC,eAUjB,OALAV,qBAAU,WACJF,GAEArG,GAAMgH,EAAS,gBAClB,CAAChH,EAAMqG,IAER,qBAAKa,UAAU,WAAf,SACE,sBAAKA,UAAU,sBAAf,UACE,uBACEC,KAAK,OACLD,UAAU,oBACVT,MAAO/F,EACP0G,SAAU,SAACC,GAAD,OAAOM,EAAQN,EAAEC,OAAOb,QAClCc,YAAY,cAEd,uBACEJ,KAAK,OACLD,UAAU,oBACVT,MAAO5F,EACPuG,SAAU,SAACC,GAAD,OAAOR,EAASQ,EAAEC,OAAOb,QACnCc,YAAY,mBAEd,uBACEJ,KAAK,WACLD,UAAU,oBACVT,MAAOtF,EACPiG,SAAU,SAACC,GAAD,OAAOP,EAAYO,EAAEC,OAAOb,QACtCc,YAAY,aAEd,wBAAQL,UAAU,gBAAgBM,QAjCvB,WACV9G,GAAMM,MAAM,qBACjBK,EAA6BX,EAAMG,EAAOM,IA+BtC,sBAGA,wBACE+F,UAAU,iCACVM,QAAS5H,EAFX,kCAMA,4DAC2B,cAAC,IAAD,CAAM6H,GAAG,IAAT,mBAD3B,iBCrBOG,MA/Bf,WACE,MAA0B1B,mBAAS,IAAnC,mBAAOrF,EAAP,KAAcgG,EAAd,KACA,EAA+BE,YAAazH,GAA5C,mBAAOU,EAAP,KAAaqG,EAAb,KACMW,GADN,KACiBC,eAKjB,OAJAV,qBAAU,WACJF,GACArG,GAAMgH,EAAS,gBAClB,CAAChH,EAAMqG,IAER,qBAAKa,UAAU,QAAf,SACE,sBAAKA,UAAU,mBAAf,UACE,uBACEC,KAAK,OACLD,UAAU,iBACVT,MAAO5F,EACPuG,SAAU,SAACC,GAAD,OAAOR,EAASQ,EAAEC,OAAOb,QACnCc,YAAY,mBAEd,wBACEL,UAAU,aACVM,QAAS,kBAAMjG,EAAkBV,IAFnC,uCAMA,0DACyB,cAAC,IAAD,CAAM4G,GAAG,YAAT,sBADzB,iBCgDOI,MAxEf,WACE,MAA+Bd,YAAazH,GAA5C,mBAAOU,EAAP,KAAaqG,EAAb,KACA,GADA,KACwBH,mBAAS,KAAjC,mBAAOxF,EAAP,KAAaiH,EAAb,KACA,EAAgCzB,oBAAS,GAAzC,mBAAO4B,EAAP,KAAiBC,EAAjB,KACA,EAA8B7B,oBAAS,GAAvC,mBAAO8B,EAAP,KAAgBC,EAAhB,KACMjB,EAAWC,cACXiB,EAAa,uCAAG,gCAAArI,EAAA,sEAEZI,EAAIC,YAAMC,YAAWX,EAAI,SAAUY,YAAM,MAAO,KAAR,OAAcJ,QAAd,IAAcA,OAAd,EAAcA,EAAMK,MAFhD,SAGAC,YAAQL,GAHR,OAGZ+B,EAHY,OAIZE,EAAOF,EAAIzB,KAAK,GAAG2B,OACzByF,EAAQzF,EAAKxB,MACK,WAAdwB,EAAKxB,MACPqH,GAAY,GAEI,UAAd7F,EAAKxB,MACPuH,GAAW,GAVK,kDAalBnH,QAAQC,MAAR,MACAC,MAAM,6CAdY,0DAAH,qDAkBnB,EAA4CkF,oBAAS,GAArD,mBAAOiC,EAAP,KAAuBC,EAAvB,KASA,OARA7B,oBAAS,sBAAC,4BAAA1G,EAAA,0DACJwG,EADI,oDAEHrG,EAFG,yCAEUgH,EAAS,MAFnB,uBAGFkB,IAHE,uBAKetE,IALf,OAKFC,EALE,OAMRuE,GAA0B,OAARvE,QAAQ,IAARA,OAAA,EAAAA,EAAUrD,QAAS,GAN7B,4CAOP,CAACR,EAAMqG,IAER,qBAAKa,UAAU,YAAf,SACG,sBAAKA,UAAU,uBAAf,yBAEE,8BAAMxG,IACN,qCAAMV,QAAN,IAAMA,OAAN,EAAMA,EAAMa,QAEXiH,GACA,8BACE,wBAAQO,MAAM,uBAAuBb,QAAS,kBAAMR,EAAS,oBAA7D,+BAIFc,GACA,8BACE,wBAAQO,MAAM,uBAAuBb,QAAS,kBAAMR,EAAS,aAA7D,SACImB,EAAiB,gBAAkB,gBAKxCL,GAAYE,IACb,8BACE,wBAAQK,MAAM,uBAAuBb,QAAS,kBAAMR,EAAS,iBAA7D,4BAIFc,GACA,8BACE,wBAAQO,MAAM,uBAAuBb,QAAS,kBAAMR,EAAS,eAA7D,0BAGH,8BACC,wBAAQqB,MAAM,uBAAuBb,QAAS/F,EAA9C,4B,yBCgCK6G,EAtGK,SAAC,GAAyF,IAAvF/D,EAAsF,EAAtFA,MAAOgE,EAA+E,EAA/EA,WAAYzG,EAAmE,EAAnEA,QAASwC,EAA0D,EAA1DA,OAAQkE,EAAkD,EAAlDA,gBAAiBC,EAAiC,EAAjCA,kBAAmBC,EAAc,EAAdA,QAEvFC,EAAgB,GAClBC,EAAkB,GACf,OAAP9G,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GAAM,OAAIgH,EAAgBhH,GAAU,KACrD,IAL2G,eAKnGiH,GACN,GAAIA,EAAI,GAAKA,GAAC,OAAG/G,QAAH,IAAGA,OAAH,EAAGA,EAAStB,SAAU,EAAG,CACrC,IAAIsI,EAAsBrG,OAAOC,OAAO,GAAIkG,GAC5CD,EAAeE,GAAC,OAAG/G,QAAH,IAAGA,OAAH,EAAGA,EAAStB,QAAU,GAAKsI,EAEzCD,GAAC,OAAGvE,QAAH,IAAGA,OAAH,EAAGA,EAAQ9D,UACP,OAAPsB,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACfgH,EAAgBhH,IAAW4C,OAAOF,EAAOuE,GAAGjH,SAP1CiH,EAAI,EAAGA,IAAC,OAAIvE,QAAJ,IAAIA,OAAJ,EAAIA,EAAQ9D,QAAQqI,IAAM,EAAlCA,GAYR,OAAIN,EAAa,GAAKA,EAAazG,EAAQtB,SAAW,EAElD,qCACE,qBAAI6H,MAAM,cAAV,UACE,6BAAI,uCAAUE,EAAWzG,EAAQtB,YADnC,OAGIsB,QAHJ,IAGIA,OAHJ,EAGIA,EAASiH,KAAI,SAAAnH,GAAM,aAAI,oCAAK+G,QAAL,IAAKA,GAAL,UAAKA,EAAiBJ,EAAazG,EAAQtB,OAAU,UAArD,aAAK,EAAqDoB,WAGrF,+BAEK8G,EAaC,6BAAKH,EAAa,IAZpB,+BACE,wBACEpB,KAAK,SACLkB,MAAM,uBACNb,QAAS,SAACwB,GAAD,OAAWR,EAAgBQ,EAAOzE,IAH7C,kBAOA,wBAAQ4C,KAAK,SAASkB,MAAM,kBAAkBb,QAAS,kBAAMiB,EAAkBlE,EAAMjC,KAArF,uBAXN,OAkBIR,QAlBJ,IAkBIA,OAlBJ,EAkBIA,EAASiH,KAAI,SAAAnH,GACX,IAAMqH,EAASzE,OAAOD,EAAM3C,IACtBsH,EAAQ,GAQd,OAPID,GAAU,GACZC,EAAK,MAAY,QACRD,EAAS,IAAMA,GAAU,GAClCC,EAAK,MAAY,SACRD,EAAS,KAClBC,EAAK,MAAY,OAEZ,oBAAIA,MAAOA,EAAX,SAAmB3E,EAAM3C,cAQ1C,+BAEK8G,EAaC,6BAAKH,EAAa,IAZpB,+BACE,wBACEpB,KAAK,SACLkB,MAAM,uBACNb,QAAS,SAACwB,GAAD,OAAWR,EAAgBQ,EAAOzE,IAH7C,kBAOA,wBAAQ4C,KAAK,SAASkB,MAAM,kBAAkBb,QAAS,kBAAMiB,EAAkBlE,EAAMjC,KAArF,uBAXN,OAuBIR,QAvBJ,IAuBIA,OAvBJ,EAuBIA,EAASiH,KAAI,SAAAnH,GACX,IAAMqH,EAASzE,OAAOD,EAAM3C,IACtBsH,EAAQ,GAQd,OAPID,GAAU,GACZC,EAAK,MAAY,QACRD,EAAS,IAAMA,GAAU,GAClCC,EAAK,MAAY,SACRD,EAAS,KAClBC,EAAK,MAAY,OAEZ,oBAAIA,MAAOA,EAAX,SAAmB3E,EAAM3C,YC5D3BuH,EAnCK,SAAC,GAId,IAAD,EAHJC,EAGI,EAHJA,cACAC,EAEI,EAFJA,sBACAC,EACI,EADJA,kBAEA,OACE,+BACE,+BACE,wBAAQnC,KAAK,SAASkB,MAAM,uBAA5B,kBACA,wBAAQlB,KAAK,SAASkB,MAAM,kBAAkBb,QAAS8B,EAAvD,uBAHJ,UAOG7G,OAAO2B,KAAKgF,UAPf,aAOG,EAA4BL,KAAI,SAACQ,EAAKC,GACrC,GAAW,OAARD,EACD,OACE,6BACE,uBACEpC,KAAK,OACLsC,SAAS,WACTlC,YAAY,kBACZ7G,KAAK,WACL+F,MAAO2C,EAAcG,GACrBnC,SAAU,SAACC,GACTgC,EAAsBhC,EAAGmC,eC1B5B,MAA0B,uCCuZ1BE,I,OA5YC,WAAO,IAAD,IACd1C,EAAWC,cAEjB,EAAkDf,mBAAS,IAA3D,mBAAOyD,EAAP,KAA0BC,EAA1B,KACA,EAA8B1D,mBAAS,IAAvC,mBAAOpE,EAAP,KAAgB+H,EAAhB,KACA,EAAoC3D,mBAAS,IAA7C,mBAAO4D,EAAP,KAAmBC,EAAnB,KAEA,EAA4B7D,mBAAS,IAArC,mBAAO5B,EAAP,KAAe0F,EAAf,KACA,EAAwC9D,mBAAS,IAAjD,mBAAO+D,EAAP,KAAqBC,EAArB,KAGA,EAA8ChE,oBAAS,GAAvD,mBAAOiE,EAAP,KAAwBC,EAAxB,KAEA,EAAwClE,mBAAS,IAAjD,mBAAOmE,EAAP,KAAqBC,EAArB,KAEA,EAAgCpE,oBAAS,GAAzC,mBAAOqE,GAAP,KAAiBC,GAAjB,KACA,GAA4BtE,mBAAS,IAArC,qBAAOrB,GAAP,MAAe4F,GAAf,MAEAlE,oBAAS,sBAAC,sCAAA1G,EAAA,sEACwBgC,IADxB,cACF6I,EADE,OAERd,EAAqBc,GAFb,SAIe9G,IAJf,cAIFC,EAJE,OAKRmG,EAAUnG,GALF,UAcmBlB,IAdnB,QAcFgI,EAdE,OAeFC,EAAmB,GACtBD,EAAanK,OAAS,IACvB4J,GAAmB,IACT,OAAPtI,QAAO,IAAPA,OAAA,EAAAA,EAAStB,UAAT,OAAmBmK,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAcnK,UAClCiC,OAAO2B,KAAKuG,EAAa,IAAI5B,KAAI,SAACQ,GAChCqB,EAAiBrB,GAAOoB,EAAa,GAAGpB,MAE1CM,EAAWe,KAITC,EAAmB,GACT,OAAhBD,QAAgB,IAAhBA,KAAkB7I,SAAQ,SAAAH,GAAM,OAAIiJ,EAAiBjJ,GAAU,KACvD,OAARiC,QAAQ,IAARA,KAAU9B,SAAQ,SAAAwC,GACA,OAAhBqG,QAAgB,IAAhBA,KAAkB7I,SAAQ,SAAAH,GACxBiJ,EAAiBjJ,IAAW4C,OAAOD,EAAM3C,UAG7C0I,EAAgBO,GAEZC,EAAW,IACC,OAAhBF,QAAgB,IAAhBA,KAAkB7I,SAAQ,SAAAH,GAErBiJ,EAAiBjJ,GAAU,KAC5B4I,IAAY,GAEXK,EAAiBjJ,GAAUkJ,IAC5BA,EAAWD,EAAiBjJ,GAC5B6I,GAAU7I,OA3CN,4CA+CP,IAEH,IAiBMmJ,GAAkB,uCAAG,WAAO/B,GAAP,iBAAAnJ,EAAA,6DACzBmJ,EAAMgC,iBADmB,SAGnBzI,EAAYT,GAHO,uBAKEa,IALF,OAKnBgI,EALmB,OAMnBC,EAAmB,GACtBD,EAAanK,OAAS,IACvB4J,GAAmB,IACT,OAAPtI,QAAO,IAAPA,OAAA,EAAAA,EAAStB,UAAT,OAAmBmK,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAcnK,UAClCiC,OAAO2B,KAAKuG,EAAa,IAAI5B,KAAI,SAACQ,GAChCqB,EAAiBrB,GAAOoB,EAAa,GAAGpB,MAE1CM,EAAWe,KAbU,2CAAH,sDAkBxB,GAA0C1E,mBAAS,IAAnD,qBAAOkD,GAAP,MAAsB6B,GAAtB,MAGA,GAAsC/E,mBAAS,MAA/C,qBAAOgF,GAAP,MAAoBC,GAApB,MAcM9B,GAAwB,SAACL,EAAOoC,GACpCpC,EAAMgC,iBAEN,IAAMK,EAAarC,EAAM1B,OAAOb,MAE1B6E,EAAY,eAAQlC,IAE1BkC,EAAaxJ,EAAQsJ,IAAUC,EAE/BJ,GAAiBK,IAGbC,GAAoB,uCAAG,WAAOvC,GAAP,uBAAAnJ,EAAA,6DAC3BmJ,EAAMgC,iBAEAQ,EAAW,CACflJ,GAAImJ,eAEC,OAAP3J,QAAO,IAAPA,KAASiH,KAAI,SAACnH,EAAQ4H,GAEpBgC,EAAS1J,EAAQ0H,IAAQS,EAAanI,EAAQ0H,OAG1CkC,EAXqB,sBAWLpH,GAXK,CAWGkH,IAC9B,UAAA/I,OAAO2B,KAAK6F,UAAZ,SAA2BlB,KAAI,SAAC7G,EAAMsH,GAEpCS,EAAanI,EAAQ0H,IAAQ,MAE/BQ,EAAU0B,GAhBiB,SAiBrB9I,EAAc4I,GAjBO,OAmBrBX,EAAmB,GAClB,OAAP/I,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GAAM,OAAIiJ,EAAiBjJ,GAAU,KAC7C,OAAT8J,QAAS,IAATA,KAAW3J,SAAQ,SAAAwC,GACV,OAAPzC,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACfiJ,EAAiBjJ,IAAW4C,OAAOD,EAAM3C,UAG7C0I,EAAgBO,GAEZC,EAAW,IACR,OAAPhJ,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACZiJ,EAAiBjJ,GAAU,KAC5B4I,IAAY,GAEXK,EAAiBjJ,GAAUkJ,IAC5BA,EAAWD,EAAiBjJ,GAC5B6I,GAAU7I,OAId+J,OAAOC,SAASC,SAvCW,4CAAH,sDA0CpBC,GAAqB,uCAAG,WAAO9C,GAAP,mBAAAnJ,EAAA,6DAC5BmJ,EAAMgC,iBAEAe,EAAc,CAClBzJ,GAAI4I,IAEC,OAAPpJ,QAAO,IAAPA,KAASiH,KAAI,SAACnH,EAAQ4H,GAEpBuC,EAAYjK,EAAQ0H,IAAQJ,GAActH,EAAQ0H,OAG9CkC,EAXsB,YAWNpH,GAEhB8G,EAAQ9G,EAAO0H,WAAU,SAACzH,GAAD,OAAWA,EAAMjC,KAAO4I,MAEvDQ,EAAUN,GAASW,EAGnB/B,EAAU0B,GACVP,GAAe,MAnBa,UAoBtBnI,EAAgB+I,GApBM,4CAAH,sDAuBrBvD,GAAkB,SAACQ,EAAOzE,GAC9ByE,EAAMgC,iBACNG,GAAe5G,EAAMjC,IAErB,IAAM2J,EAAc,GAEb,OAAPnK,QAAO,IAAPA,KAASiH,KAAI,SAACnH,EAAQ4H,GAEpByC,EAAYnK,EAAQ0H,IAAQjF,EAAMzC,EAAQ0H,OAG5CyB,GAAiBgB,IAGb3C,GAAoB,WACxB6B,GAAe,OAGX1C,GAAoB,SAACpF,GACzB,IAAMqI,EAAS,YAAOpH,GAEhB8G,EAAQ9G,EAAO0H,WAAU,SAACzH,GAAD,OAAWA,EAAMjC,KAAOe,KAEvDqI,EAAUQ,OAAOd,EAAO,GAExBpB,EAAU0B,GACVtI,EAAgBC,IAGZ8I,GAAe,uCAAG,sBAAAtM,EAAA,sEAChBoE,IADgB,OAEtB+C,EAAS,cAFa,2CAAH,qDAKfoF,GAAkB,uCAAG,sBAAAvM,EAAA,sEACnBiF,IADmB,OAEzBkC,EAAS,cAFgB,2CAAH,qDAoCxB,OACE,gCACImD,GACA,qCACE,gCAAK,wCAAL,KAA6B,OAAPrI,QAAO,IAAPA,OAAA,EAAAA,EAAStB,QAAS,IAlCzB,IAAZ,OAAN8D,QAAM,IAANA,OAAA,EAAAA,EAAQ9D,UAAqB,OAAN8D,QAAM,IAANA,OAAA,EAAAA,EAAQ9D,SAAR,OAAiBsB,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAStB,SAAU,EACrDsB,GAAe,OAAPA,QAAO,IAAPA,OAAA,EAAAA,EAAStB,QAAS,GAE5BsB,GAAe,OAANwC,QAAM,IAANA,OAAA,EAAAA,EAAQ9D,SAAR,OAAiBsB,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAStB,QAAU,OAgC9C,gCAAK,uCAAL,cA7BiB,WACvB,IAAI6L,EAAgB,GAChBC,EAAe,IAOnB,OANO,OAAPxK,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACZyI,EAAazI,GAAU0K,IACxBA,EAAejC,EAAazI,GAC5ByK,EAAgBzK,MAGbyK,EAoBoBE,UAArB,QAA2C,MAA3C,IAAmD,qBAAKC,IAAKC,EAAWvD,MAAO,CAACwD,MAAO,OAAQC,OAAQ,UAAvG,OACA,gCAAK,yCAAL,cAlBgB,WACtB,IAAIN,EAAgB,GAChBC,EAAe,EAOnB,OANO,OAAPxK,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACZyI,EAAazI,GAAU0K,IACxBA,EAAejC,EAAazI,GAC5ByK,EAAgBzK,MAGbyK,EASsBO,UAAvB,QAA4C,aAI7CzC,GACD,sBAAKjB,MAAO,CAAC2D,QAAS,OAAQC,cAAe,UAA7C,UACE,+CACA,uBAAM5D,MAAO,CAAC4D,cAAe,UAAWC,SA5MlB,SAAC/D,GAC7BA,EAAMgC,mBAEN,OAAClJ,QAAD,IAACA,OAAD,EAACA,EAASkL,SAASlD,KAAeA,GAAchI,EAAQG,KAAK6H,GAC7DC,EAAc,IAEdF,EAAW/H,IAsML,UASE,qBAAKoH,MAAO,CAAC2D,QAAS,OAAQC,cAAe,UAAW1F,SA7NpC,SAAC4B,GAC7BA,EAAMgC,iBAEN,IAAMK,EAAarC,EAAM1B,OAAOb,MAEhCsD,EAAcsB,IAwNN,gBACG1B,QADH,IACGA,OADH,EACGA,EAAmBZ,KAAI,SAAAnH,GAAM,OAC5B,sBAAKsH,MAAO,CAAE+D,YAAa,QAA3B,UACE,uBACE9F,KAAK,QACLzG,KAAK,aACL+F,MAAO7E,IAERA,UAIP,wBAAQuF,KAAK,SAASkB,MAAM,kBAAkBa,MAAO,CAACwD,MAAO,SAA7D,wBACA,wBAAQrE,MAAM,kBAAkBa,MAAO,CAACwD,MAAO,SAAUlF,QAASuD,GAAoBmC,SAAUpL,EAAQtB,QAAU,EAAlH,+BAKH+J,IACD,sBAAKrD,UAAU,gBAAf,UACE,sBAAM6F,SAAUjB,GAAhB,SACE,wBAAOzD,MAAM,oBAAb,UACE,gCACE,gCACU,OAAPvG,QAAO,IAAPA,OAAA,EAAAA,EAAStB,QAAS,GAAK,uCAD1B,OAEGsB,QAFH,IAEGA,OAFH,EAEGA,EAASiH,KAAI,SAAAnH,GAAM,OAAI,6BAAKA,YAGjC,yCACG0C,QADH,IACGA,OADH,EACGA,EAAQyE,KAAI,SAACxE,EAAOiF,GAAR,OACX,cAAC,WAAD,UACG0B,KAAgB3G,EAAMjC,GACrB,cAAC,EAAD,CACE8G,cAAeA,GACfC,sBAAuBA,GACvBC,kBAAmBA,KAGrB,cAAC,EAAD,CACE/E,MAAOA,EACPgE,WAAYiB,EACZ1H,QAASA,EACT0G,gBAAiBA,GACjBC,kBAAmBA,GACnBnE,OAAQA,SAKhB,qBAAI+D,MAAM,QAAV,UACE,6BAAI,wCADN,OAGIvG,QAHJ,IAGIA,OAHJ,EAGIA,EAASiH,KAAI,SAAAnH,GAAM,OAAI,6BAAKyI,EAAazI,mBAQnD,sBAAMmL,SAAUxB,GAAhB,SACE,uBAAOlD,MAAM,QAAb,SACE,gCACE,+BACE,6BACE,wBAAQlB,KAAK,SAASkB,MAAM,kBAAkBa,MAAO,CAACwD,MAAO,SAAUQ,UAAW/C,EAAlF,mBAFJ,OAIGrI,QAJH,IAIGA,OAJH,EAIGA,EAASiH,KAAI,SAACnH,EAAQ4H,GAAT,OACZ,6BACE,uBACErC,KAAK,OACL+B,MAAO,CAACwD,MAAO,SACfhM,KAAK,WAEL+F,MAAOwD,EAAanI,EAAQ0H,IAC5BC,SAAS,WACTlC,YAAY,kBACZH,SACE,SAACC,IAnQI,SAAC2B,EAAOoC,GACnCpC,EAAMgC,iBAEN,IAAMK,EAAarC,EAAM1B,OAAOb,MAE1B6E,EAAY,eAAQrB,GAE1BqB,EAAaxJ,EAAQsJ,IAAUC,EAE/BnB,EAAgBoB,GA2PQ6B,CAAqB9F,EAAGmC,uBAY5Ce,IACA,gCACE,gCAAM1F,GAAN,kBAA4B,qBAAK2H,IAAKC,EAAWvD,MAAO,CAACwD,MAAO,OAAQC,OAAQ,aAChF,8BACE,wBAAQtE,MAAM,uBAAuBb,QAAS2E,GAAiBe,UAAW/C,EAA1E,yBAEF,8BACE,wBAAQ9B,MAAM,uBAAuBb,QAAS4E,GAAoBc,UAAW/C,EAA7E,0BAIN,wBAAQ9B,MAAM,kBAAkBb,QAAS,kBAAMR,EAAS,eAAxD,4BCjUSoG,GA1EQ,WACrB,IAAMpG,EAAWC,cAEjB,EAA8Bf,mBAAS,IAAvC,mBAAOpE,EAAP,KAAgB+H,EAAhB,KACA,EAAoC3D,mBAAS,IAA7C,mBAAO4D,EAAP,KAAmBC,EAAnB,KAEAxD,oBAAS,sBAAC,4BAAA1G,EAAA,sEACmBgC,IADnB,OACF8I,EADE,OAERd,EAAWc,GAFH,2CAGP,IAEH,IAQM0C,EAA0B,uCAAG,WAAOrE,GAAP,eAAAnJ,EAAA,6DACjCmJ,EAAMgC,iBAD2B,SAG3BrJ,EAAe,CACnBjB,KAAMoJ,EACNxH,GAAIQ,KAAKC,QALsB,cAQjCgH,EAAc,IARmB,SASNlI,IATM,OAS3B8I,EAT2B,OAUjCd,EAAWc,GAVsB,2CAAH,sDAahC,OACE,gCACE,gCACE,yCACA,uBAAMoC,SAAUM,EAAhB,UACE,uBACElG,KAAK,OACLzG,KAAK,SACL+F,MAAOqD,EACPL,SAAS,WACTlC,YAAY,uBACZH,SAhCyB,SAAC4B,GAClCA,EAAMgC,iBAEN,IAAMK,EAAarC,EAAM1B,OAAOb,MAEhCsD,EAAcsB,MA6BR,wBAAQlE,KAAK,SAASkB,MAAM,kBAA5B,6BAIK,OAAPvG,QAAO,IAAPA,OAAA,EAAAA,EAAStB,QAAS,GAClB,qBAAK6H,MAAM,OAAX,SACE,wBAAOA,MAAM,wBAAb,UACE,gCACE,+BACE,+CACA,kDAGJ,uCACKvG,QADL,IACKA,OADL,EACKA,EAASiH,KAAI,SAACnH,EAAQ4H,GAAT,OACZ,+BACE,6BAAKA,EAAI,IACT,6BAAK5H,iBAOnB,wBAAQyG,MAAM,kBAAkBb,QAAS,kBAAMR,EAAS,eAAxD,2BCpBSsG,GAlDK,WAClB,IAAMtG,EAAWC,cAEjB,EAAsCf,mBAAS,IAA/C,mBAAOvB,EAAP,KAAoB4I,EAApB,KAOA,OALAhH,oBAAS,sBAAC,4BAAA1G,EAAA,sEACkBkF,IADlB,OACFJ,EADE,OAER4I,EAAe5I,GAFP,2CAGP,IAGD,gCACE,uBACA,8BACE,wBAAQ0D,MAAM,kBAAkBb,QAAS,kBAAMR,EAAS,eAAxD,yBAEF,uBACA,8BACE,wBAAQqB,MAAM,kBAAkBb,QAAS,kBAAMR,EAAS,eAAxD,0BAEF,oBAAIE,UAAU,OAAOgC,MAAO,CAACsE,MAAO,SAApC,2BAEa,OAAX7I,QAAW,IAAXA,OAAA,EAAAA,EAAanE,QAAS,GACtB,8BACE,wBAAO6H,MAAM,sBAAb,UACE,gCACE,+BACE,sCACA,+CACA,wCACA,6CAGJ,uCACK1D,QADL,IACKA,OADL,EACKA,EAAaoE,KAAI,SAAA9D,GAAI,OACpB,+BACE,6BAAI,mBAAGwI,KAAI,kDAAsCxI,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAML,WAAnD,gBAAiEK,QAAjE,IAAiEA,OAAjE,EAAiEA,EAAME,SAC3E,oCAAKF,QAAL,IAAKA,OAAL,EAAKA,EAAMX,SACX,sCAAKW,QAAL,IAAKA,OAAL,EAAKA,EAAMJ,OAAX,IAAmB,uBAAnB,YAA+BI,QAA/B,IAA+BA,OAA/B,EAA+BA,EAAMO,YAArC,OACA,sCAAKP,QAAL,IAAKA,OAAL,EAAKA,EAAMQ,OAAX,IAAmB,uBAAnB,YAA+BR,QAA/B,IAA+BA,OAA/B,EAA+BA,EAAMS,YAArC,wB,SCyCLgI,OAlFf,SAAkBC,GAChB,IACEjN,EAIEiN,EAJFjN,KACAwB,EAGEyL,EAHFzL,KACA0L,EAEED,EAFFC,YACAC,EACEF,EADFE,YAOInB,EAAQ,EAAIkB,EAHsB,GAAtB,GAIZjB,EAAS,EAAIiB,EAJZ,GAAuB,GAWxBE,EAAaC,KAAgBA,MA2DnC,OAzDAxH,qBAAU,YAIV,WAEEwH,KAAU,kBAAqBrN,GAC5BsN,OAAO,OACPC,SAGH,IAAMC,EAAMH,KACF,kBAAqBrN,GAC5ByN,OAAO,OACPC,KAAK,QAAS1B,GACd0B,KAAK,SAAUzB,GACfwB,OAAO,KACPC,KAAK,YANI,oBAMsB1B,EAAQ,EAN9B,aAMoCC,EAAS,EAN7C,MAQN0B,EAAeN,OAElBF,YAAYA,GACZD,YAAYA,GAETU,EAAeP,OAElBQ,SAAS,GACT9H,OAAM,SAACxD,GAAD,OAAOA,EAAEwD,SAEZ+H,EAAMN,EACTO,YACAvM,KAAKoM,EAAapM,IAClBwM,QAGHF,EACGL,OAAO,QACPC,KAAK,IAAKC,GACVnF,MAAM,QAAQ,SAACyF,EAAG9F,GAAJ,OAAUiF,EAAWjF,MACnCK,MAAM,SAAU,WAChBA,MAAM,eAAgB,GAGzBsF,EACGL,OAAO,QACPC,KAAK,cAAe,UACpBA,KAAK,qBAAsB,UAC3BQ,MAAK,SAAC3L,GAAD,OAAOA,EAAEf,KAAK2M,SAGnB3F,MAAM,OAAQ,WACdkF,KAAK,aAAa,SAACnL,GAClB,MAAeoL,EAAaS,SAAS7L,GAArC,mBAAO8L,EAAP,KAAUC,EAAV,KACA,MAAM,aAAN,OAAoBD,EAApB,aAA0BC,EAA1B,QApDJC,KACC,CAAC/M,IAuDG,qBAAKI,GAAI,iBAAoB5B,KC0uBvBwO,GApzBG,WAAO,IAAD,IAChBlI,EAAWC,cAEjB,EAAoDf,mBAAS,IAA7D,mBAAOiJ,EAAP,KAA2BC,EAA3B,KAEA,EAA8ClJ,mBAAS,IAAvD,mBAAOmJ,EAAP,KAAwBC,EAAxB,KAEA,EAA8CpJ,mBAAS,IAAvD,mBAAOqJ,EAAP,KAAwBC,EAAxB,KACA,EAA8CtJ,mBAAS,IAAvD,mBAAOuJ,EAAP,KAAwBC,EAAxB,KACA,EAAwCxJ,mBAAS,IAAjD,mBAAOyJ,EAAP,KAAqBC,EAArB,KAgCMC,EAAuC,SAAC/N,GAK5C,IAJA,IAAMgO,EAAIhO,EAAQtB,OACduP,EAAmBjO,EAAQkO,KAAK,QAG3BnH,EAAI,EAAGA,EAAIiH,EAAGjH,IAAK,CAExB,IAAMoH,EAAWnO,EAAQoO,MAAMrH,GAAGsH,OAAOrO,EAAQoO,MAAM,EAAGrH,IAAImH,KAAK,QAG/DC,EAAWF,IACXA,EAAmBE,GAI3B,OAAOF,GAsbT,OAnbAxJ,oBAAS,sBAAC,0DAAA1G,EAAA,sEACkBkF,IADlB,OAsaR,IAraMJ,EADE,OAGFyL,EAAoB,GACpBC,EAAoB,GACpBC,EAAiB,GACjBC,EAAkB,GAClBC,EAAgB,GAChBnB,EAAkB,GACb,OAAX1K,QAAW,IAAXA,KAAa5C,SAAQ,SAAAkD,GAAS,IAAD,gBAEvBwL,EAAWL,EAAiB,OAACnL,QAAD,IAACA,OAAD,EAACA,EAAMJ,QAIrCuL,EAAiB,OAACnL,QAAD,IAACA,OAAD,EAACA,EAAMJ,QAHtB4L,EAGgCA,EAAS,EAFT,EAKpC,IAAIC,EAAcL,EAAiB,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAMQ,QAIxC4K,EAAiB,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAMQ,QAHtBiL,EAGgCA,EAAY,EAFZ,EAKpC,IAAMC,EAAG,OAAG1L,QAAH,IAAGA,GAAH,UAAGA,EAAMR,qBAAT,iBAAG,GAA0B,OAAJQ,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,eAAqBjE,QAAS,UAAvD,aAAG,EAAwDE,KAChEkQ,EAAWN,EAAeK,GAI5BL,EAAeK,GAHbC,EAGoBA,EAAS,EAFT,EAKpB,OAAJ3L,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,SAAqB1C,SAAQ,SAAAH,GAC3B,IAAIiP,EAAYN,EAAe,OAAC3O,QAAD,IAACA,OAAD,EAACA,EAAQlB,MAItC6P,EAAe,OAAC3O,QAAD,IAACA,OAAD,EAACA,EAAQlB,MAHtBmQ,EAG8BA,EAAU,EAFV,KAMpC,IAAMC,EAAU,GACZ,OAAJ7L,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,SAAqBsE,KAAI,SAACnH,EAAQ4H,GAAT,OAAiBsH,EAAQ7O,KAAR,OAAaL,QAAb,IAAaA,OAAb,EAAaA,EAAQlB,SAC/D,IAAIqQ,EAAeP,EAAcM,GAI/BN,EAAcM,GAHZC,EAGuBA,EAAa,EAFb,EAK3B,IAIO,IAJDC,EAAkB,OAAG/L,QAAH,IAAGA,GAAH,UAAGA,EAAMR,qBAAT,iBAAG,EAAqBsE,KAAI,SAAAnH,GAAM,cAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAQlB,eAA9C,iBAAG,EAAkDyB,cAArD,aAAG,EAA0D6N,KAAK,KAC/DX,EAAgB2B,GAIzC,UAAA3B,EAAgB2B,UAAhB,mBAAqCC,aAArC,SAA4ChP,KAAKgD,GAFjDoK,EAAgB2B,GAAsB,CAACC,MAAO,CAAChM,IAIjDxC,OAAO2B,KAAKoM,GAAezO,SAAQ,SAAA+O,GAAY,IAAD,IAKrB,EAJjBI,EAAc,OAAGJ,QAAH,IAAGA,OAAH,EAAGA,EAASK,MAAM,KAChCC,EAAoB,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAgB/O,OACvCkP,EAAuB,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAsBpB,KAAK,MACtC,UAAGX,EAAgBgC,UAAnB,iBAAG,EAA0Cb,qBAA7C,aAAG,EAAyDM,YAE5E,UAACzB,EAAgBgC,UAAjB,aAAC,EAA0Cb,iBAC5CnB,EAAgBgC,GAAhB,cAA4D,KAGhEhC,EAAgBgC,GAAyBb,cAAcM,GAAWN,EAAcM,GAEhF,IAAMQ,EAAuB7O,OAAO8O,QAAQlC,EAAgBgC,GAAyBb,eAEjE,OAApBc,QAAoB,IAApBA,KAAsBnP,MAAK,SAACqP,EAAIC,GAAL,OAAc,OAAFA,QAAE,IAAFA,OAAA,EAAAA,EAAK,KAAL,OAAUD,QAAV,IAAUA,OAAV,EAAUA,EAAK,OAEtD,IAAME,EAAmB,OAAGJ,QAAH,IAAGA,OAAH,EAAGA,EAAsBK,QAAO,SAACC,EAAD,GAAwB,IAAD,mBAAhBrI,EAAgB,KAAX9C,EAAW,KAE9E,OADAmL,EAAIrI,GAAO9C,EACJmL,IACN,IAEHvC,EAAgBgC,GAAyBb,cAAgBkB,QAI7D,UAAAjP,OAAO2B,KAAKiL,UAAZ,SAA8BtN,SAAQ,SAAAiP,GAAuB,IAAD,UACpDa,EAAqBxC,EAAgB2B,GACrCZ,EAAoB,GACpBC,EAAoB,GACpBC,EAAiB,GACjBC,EAAkB,GAClBuB,EAAoB,GACpBC,EAAqB,GACrBC,EAAqB,GACrBC,EAA+B,GAC/BC,EAA+B,GACnB,OAAlBL,QAAkB,IAAlBA,GAAA,UAAAA,EAAoBZ,aAApB,SAA2BlP,SAAQ,SAAAkD,GAAS,IAAD,YAErCwL,EAAWL,EAAiB,OAACnL,QAAD,IAACA,OAAD,EAACA,EAAMJ,QAIrCuL,EAAiB,OAACnL,QAAD,IAACA,OAAD,EAACA,EAAMJ,QAHtB4L,EAGgCA,EAAS,EAFT,EAKpC,IAAIC,EAAcL,EAAiB,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAMQ,QAIxC4K,EAAiB,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAMQ,QAHtBiL,EAGgCA,EAAY,EAFZ,EAKpC,IAAMC,EAAG,OAAG1L,QAAH,IAAGA,GAAH,UAAGA,EAAMR,qBAAT,iBAAG,GAA0B,OAAJQ,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,eAAqBjE,QAAS,UAAvD,aAAG,EAAwDE,KAChEkQ,EAAWN,EAAeK,GAI5BL,EAAeK,GAHbC,EAGoBA,EAAS,EAFT,EAKpB,OAAJ3L,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,SAAqB1C,SAAQ,SAAAH,GAC3B,IAAIiP,EAAYN,EAAe,OAAC3O,QAAD,IAACA,OAAD,EAACA,EAAQlB,MAItC6P,EAAe,OAAC3O,QAAD,IAACA,OAAD,EAACA,EAAQlB,MAHtBmQ,EAG8BA,EAAU,EAFV,KAMpC,IAAMsB,EAAM,OAAGlN,QAAH,IAAGA,OAAH,EAAGA,EAAMnD,SAAY,OAAJmD,QAAI,IAAJA,GAAA,UAAAA,EAAMnD,eAAN,eAAetB,QAAS,GACjD4R,EAAcN,EAAkBK,GAIlCL,EAAkBK,GAHhBC,EAG0BA,EAAY,EAFZ,EAK9B,IAWO,IAXDC,EAAU,OAAGpN,QAAH,IAAGA,GAAH,UAAGA,EAAMnD,eAAT,aAAG,EAAekO,KAAK,QACnCsC,EAAeP,EAAmBM,IAIpCN,EAAmBM,GAHjBC,EAG+BA,EAAa,EAFb,EAKXN,EAAmBK,IAIzC,UAAAL,EAAmBK,UAAnB,mBAAgCpB,aAAhC,SAAuChP,KAAKgD,GAF5C+M,EAAmBK,GAAc,CAACpB,MAAO,CAAChM,IAM5C,IAWO,IAXDsN,EAAuB1C,EAAoC,OAAC5K,QAAD,IAACA,OAAD,EAACA,EAAMnD,SACpE0Q,EAAyBP,EAA6BM,IAIxDN,EAA6BM,GAH3BC,EAGmDA,EAAuB,EAFvB,EAKrBN,EAA6BK,IAI7D,UAAAL,EAA6BK,UAA7B,mBAAoDtB,aAApD,SAA2DhP,KAAKgD,GAFhEiN,EAA6BK,GAAwB,CAACtB,MAAO,CAAChM,OAKlEoK,EAAgB2B,GAAoBZ,kBAAoBA,EACxDf,EAAgB2B,GAAoBX,kBAAoBA,EACxDhB,EAAgB2B,GAAoBV,eAAiBA,EACrDjB,EAAgB2B,GAAoBT,gBAAkBA,EACtDlB,EAAgB2B,GAAoBc,kBAAoBA,EACxDzC,EAAgB2B,GAAoBe,mBAAqBA,EACzD1C,EAAgB2B,GAAoByB,wBAA0B,GAC9DpD,EAAgB2B,GAAoBiB,6BAA+BA,EACnE5C,EAAgB2B,GAAoB0B,kCAAoC,GACxErD,EAAgB2B,GAAoB7B,mBAAqB,GACzDE,EAAgB2B,GAAoBzB,gBAAkB,GACtDF,EAAgB2B,GAAoBvB,gBAAkB,GACtDJ,EAAgB2B,GAAoBrB,aAAe,GACjC,OAAlBqB,QAAkB,IAAlBA,GAAA,UAAAA,EAAoBG,MAAM,YAA1B,SAAgCpP,SAAQ,SAAAH,GACtCyN,EAAgB2B,GAAoB7B,mBAAmBlN,KAAK,CAC1D6H,WAAYlI,EACZiD,OAAQuL,EAAkBxO,GAC1B6D,OAAQ4K,EAAkBzO,GAC1B+O,IAAKL,EAAe1O,GACpB+Q,YAAapC,EAAgB3O,GAC7BgR,cAAexC,EAAkBxO,GAAUiR,KAAKtO,MAAO6L,EAAkBxO,GAAU2O,EAAgB3O,GAAW,KAAO,EACrHkR,iBAAkBzC,EAAkBzO,GAAUiR,KAAKtO,MAAO8L,EAAkBzO,GAAU2O,EAAgB3O,GAAW,KAAO,EACxHmR,cAAezC,EAAe1O,GAAUiR,KAAKtO,MAAO+L,EAAe1O,GAAU2O,EAAgB3O,GAAW,KAAO,IAEjHyN,EAAgB2B,GAAoBzB,gBAAgBtN,KAAK,CACvD4M,MAAOjN,EACP6E,MAAO4I,EAAgB2B,GAAoBZ,kBAAkBxO,KAE/DyN,EAAgB2B,GAAoBvB,gBAAgBxN,KAAK,CACvD4M,MAAOjN,EACP6E,MAAO4I,EAAgB2B,GAAoBX,kBAAkBzO,KAE/DyN,EAAgB2B,GAAoBrB,aAAa1N,KAAK,CACpD4M,MAAOjN,EACP6E,MAAO4I,EAAgB2B,GAAoBV,eAAe1O,QAG9D,UAAAyN,EAAgB2B,GAAoB7B,0BAApC,SAAwDhN,MAAK,SAACC,EAAIC,GAAL,OAAc,OAAFA,QAAE,IAAFA,OAAA,EAAAA,EAAIuQ,gBAAJ,OAAoBxQ,QAApB,IAAoBA,OAApB,EAAoBA,EAAIwQ,kBAEjG,UAAAnQ,OAAO2B,KAAK4N,UAAZ,SAAiCjQ,SAAQ,SAAAsQ,GAAe,IAAD,EACrDvR,QAAQ6C,IAAI,aAAc0O,GAC1B,IAAMW,EAAwBhB,EAAmBK,GAC3CjC,EAAoB,GACpBC,EAAoB,GACpBC,EAAiB,GACjBC,EAAkB,GACH,OAArByC,QAAqB,IAArBA,GAAA,UAAAA,EAAuB/B,aAAvB,SAA8BlP,SAAQ,SAAAkD,GAAS,IAAD,QAExCwL,EAAWL,EAAiB,OAACnL,QAAD,IAACA,OAAD,EAACA,EAAMJ,QAIrCuL,EAAiB,OAACnL,QAAD,IAACA,OAAD,EAACA,EAAMJ,QAHtB4L,EAGgCA,EAAS,EAFT,EAKpC,IAAIC,EAAcL,EAAiB,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAMQ,QAIxC4K,EAAiB,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAMQ,QAHtBiL,EAGgCA,EAAY,EAFZ,EAKpC,IAAMC,EAAG,OAAG1L,QAAH,IAAGA,GAAH,UAAGA,EAAMR,qBAAT,iBAAG,GAA0B,OAAJQ,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,eAAqBjE,QAAS,UAAvD,aAAG,EAAwDE,KAChEkQ,EAAWN,EAAeK,GAI5BL,EAAeK,GAHbC,EAGoBA,EAAS,EAFT,EAKpB,OAAJ3L,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,SAAqB1C,SAAQ,SAAAH,GAC3B,IAAIiP,EAAYN,EAAe,OAAC3O,QAAD,IAACA,OAAD,EAACA,EAAQlB,MAItC6P,EAAe,OAAC3O,QAAD,IAACA,OAAD,EAACA,EAAQlB,MAHtBmQ,EAG8BA,EAAU,EAFV,QAMtC,IAAMoC,EAA0BxQ,OAAO8O,QAAQnB,GAC9CjO,MAAK,kBAAItC,EAAJ,+CAAsBA,KAC3B8R,QAAO,SAACC,EAAD,GAAwB,IAAD,mBAAhBrI,EAAgB,KAAX9C,EAAW,KAE7B,OADAmL,EAAIrI,GAAO9C,EACJmL,IACN,IACGsB,EAA0BzQ,OAAO8O,QAAQlB,GAC9ClO,MAAK,kBAAItC,EAAJ,+CAAsBA,KAC3B8R,QAAO,SAACC,EAAD,GAAwB,IAAD,mBAAhBrI,EAAgB,KAAX9C,EAAW,KAE7B,OADAmL,EAAIrI,GAAO9C,EACJmL,IACN,IACGuB,EAAuB1Q,OAAO8O,QAAQjB,GAC3CnO,MAAK,kBAAItC,EAAJ,+CAAsBA,KAC3B8R,QAAO,SAACC,EAAD,GAAwB,IAAD,mBAAhBrI,EAAgB,KAAX9C,EAAW,KAE7B,OADAmL,EAAIrI,GAAO9C,EACJmL,IACN,IACHvC,EAAgB2B,GAAoByB,wBAAwBJ,GAAc,CACxEjC,kBAAmB6C,EACnB5C,kBAAmB6C,EACnB5C,eAAgB6C,EAChB5C,sBAIJ,UAAA9N,OAAO2B,KAAK8N,UAAZ,SAA2CnQ,SAAQ,SAAAsQ,GAAe,IAAD,EAC/DvR,QAAQ6C,IAAI,aAAc0O,GAC1B,IAAMe,EAAkClB,EAA6BG,GAC/DjC,EAAoB,GACpBC,EAAoB,GACpBC,EAAiB,GACjBC,EAAkB,GACO,OAA/B6C,QAA+B,IAA/BA,GAAA,UAAAA,EAAiCnC,aAAjC,SAAwClP,SAAQ,SAAAkD,GAAS,IAAD,QAElDwL,EAAWL,EAAiB,OAACnL,QAAD,IAACA,OAAD,EAACA,EAAMJ,QAIrCuL,EAAiB,OAACnL,QAAD,IAACA,OAAD,EAACA,EAAMJ,QAHtB4L,EAGgCA,EAAS,EAFT,EAKpC,IAAIC,EAAcL,EAAiB,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAMQ,QAIxC4K,EAAiB,OAACpL,QAAD,IAACA,OAAD,EAACA,EAAMQ,QAHtBiL,EAGgCA,EAAY,EAFZ,EAKpC,IAAMC,EAAG,OAAG1L,QAAH,IAAGA,GAAH,UAAGA,EAAMR,qBAAT,iBAAG,GAA0B,OAAJQ,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,eAAqBjE,QAAS,UAAvD,aAAG,EAAwDE,KAChEkQ,EAAWN,EAAeK,GAI5BL,EAAeK,GAHbC,EAGoBA,EAAS,EAFT,EAKpB,OAAJ3L,QAAI,IAAJA,GAAA,UAAAA,EAAMR,qBAAN,SAAqB1C,SAAQ,SAAAH,GAC3B,IAAIiP,EAAYN,EAAe,OAAC3O,QAAD,IAACA,OAAD,EAACA,EAAQlB,MAItC6P,EAAe,OAAC3O,QAAD,IAACA,OAAD,EAACA,EAAQlB,MAHtBmQ,EAG8BA,EAAU,EAFV,QAMtC,IAAMoC,EAA0BxQ,OAAO8O,QAAQnB,GAC9CjO,MAAK,kBAAItC,EAAJ,+CAAsBA,KAC3B8R,QAAO,SAACC,EAAD,GAAwB,IAAD,mBAAhBrI,EAAgB,KAAX9C,EAAW,KAE7B,OADAmL,EAAIrI,GAAO9C,EACJmL,IACN,IACGsB,EAA0BzQ,OAAO8O,QAAQlB,GAC9ClO,MAAK,kBAAItC,EAAJ,+CAAsBA,KAC3B8R,QAAO,SAACC,EAAD,GAAwB,IAAD,mBAAhBrI,EAAgB,KAAX9C,EAAW,KAE7B,OADAmL,EAAIrI,GAAO9C,EACJmL,IACN,IACGuB,EAAuB1Q,OAAO8O,QAAQjB,GAC3CnO,MAAK,kBAAItC,EAAJ,+CAAsBA,KAC3B8R,QAAO,SAACC,EAAD,GAAwB,IAAD,mBAAhBrI,EAAgB,KAAX9C,EAAW,KAE7B,OADAmL,EAAIrI,GAAO9C,EACJmL,IACN,IACHvC,EAAgB2B,GAAoB0B,kCAAkCL,GAAc,CAClFjC,kBAAmB6C,EACnB5C,kBAAmB6C,EACnB5C,eAAgB6C,EAChB5C,yBAKA8C,EAAW,GACXC,EAAsB,GACtB,OAAN7Q,aAAM,IAANA,QAAA,UAAAA,OAAQ2B,KAAKoM,UAAb,SAA6BzH,KAAI,SAAAwK,GAAM,IAAD,EAC9BC,EAAM,CACV1R,QAAO,OAAEyR,QAAF,IAAEA,OAAF,EAAEA,EAAGpC,MAAM,KAClBsC,KAAMjD,EAAc+C,IAEnB,OAAHC,QAAG,IAAHA,GAAA,UAAAA,EAAK1R,eAAL,SAAcC,SAAQ,SAAAH,GAAM,OAAK0R,EAAoBtG,SAASpL,IAAW0R,EAAoBrR,KAAKL,MAClGyR,EAASpR,KAAKuR,MAER,OAARH,QAAQ,IAARA,KAAUlR,MAAK,SAACwD,EAAOC,GAAR,OAAkBA,EAAM6N,KAAO9N,EAAM8N,QAE9C,OAANhR,aAAM,IAANA,QAAA,UAAAA,OAAQ2B,KAAKiL,UAAb,SAA+BtN,SAAQ,SAAAiP,GAAuB,IAAD,IACrDa,EAAqBxC,EAAgB2B,GACrC0C,EAAc,GACpB,UAAA1C,EAAmBG,MAAM,YAAzB,SAA+BpP,SAAQ,SAAAH,GACrC8R,EAAY9R,GAAU,CACpB+R,OAAQ,EACRC,MAAO,EACPC,KAAM,EACNC,aAAc,MAGA,OAAlBjC,QAAkB,IAAlBA,GAAA,UAAAA,EAAoBZ,aAApB,SAA2BlP,SAAQ,SAAAkD,GACd,OAAnBqO,QAAmB,IAAnBA,KAAqBvR,SAAQ,SAAAH,GAAW,IAAD,EACjC,OAAJqD,QAAI,IAAJA,GAAA,UAAAA,EAAMM,kBAAN,SAAkBxD,SAAQ,SAAAwC,GACxB,IAAM0E,EAASzE,OAAOD,EAAM3C,IACb,IAAXqH,EACFyK,EAAY9R,GAAQ+R,QAAU,EACV,KAAX1K,EACTyK,EAAY9R,GAAQgS,OAAS,EACpB3K,EAAS,IAAMA,EAAS,KACjCyK,EAAY9R,GAAQiS,MAAQ,GAEhB,IAAV5K,IACFyK,EAAY9R,GAAQkS,cAAgB,YAK5CzE,EAAgB2B,GAAoB0C,YAAcA,KAGpDpE,EAAmBD,GAEbF,EAAqB,GACrB,OAAN1M,aAAM,IAANA,QAAA,UAAAA,OAAQ2B,KAAKgM,UAAb,SAAiCrO,SAAQ,SAAAH,GAEvCuN,EAAmBlN,KAAK,CACtB6H,WAAYlI,EACZiD,OAAQuL,EAAkBxO,GAC1B6D,OAAQ4K,EAAkBzO,GAC1B+O,IAAKL,EAAe1O,GACpB+Q,YAAapC,EAAgB3O,GAC7BgR,cAAexC,EAAkBxO,GAAUiR,KAAKtO,MAAO6L,EAAkBxO,GAAU2O,EAAgB3O,GAAW,KAAO,EACrHkR,iBAAkBzC,EAAkBzO,GAAUiR,KAAKtO,MAAO8L,EAAkBzO,GAAU2O,EAAgB3O,GAAW,KAAO,EACxHmR,cAAezC,EAAe1O,GAAUiR,KAAKtO,MAAO+L,EAAe1O,GAAU2O,EAAgB3O,GAAW,KAAO,IAEjH2N,EAAgBtN,KAAK,CACnB4M,MAAOjN,EACP6E,MAAO2J,EAAkBxO,KAE3B6N,EAAgBxN,KAAK,CACnB4M,MAAOjN,EACP6E,MAAO4J,EAAkBzO,KAE3B+N,EAAa1N,KAAK,CAChB4M,MAAOjN,EACP6E,MAAO6J,EAAe1O,QAI1B4N,EAAmBD,GACnBG,EAAmBD,GACnBG,EAAgBD,GAEE,OAAlBR,QAAkB,IAAlBA,KAAoBhN,MAAK,SAACC,EAAIC,GAAL,OAAc,OAAFA,QAAE,IAAFA,OAAA,EAAAA,EAAIuQ,gBAAJ,OAAoBxQ,QAApB,IAAoBA,OAApB,EAAoBA,EAAIwQ,kBAE7DxD,EAAsBD,GAGlByC,EAAMmC,SAASC,uBAAuB,aAGrCnL,EAAI,EAAGA,EAAI+I,EAAIpR,OAAQqI,IAC1B+I,EAAI/I,GAAGoL,iBAAiB,SAAS,WAC/BC,KAAKC,UAAUC,OAAO,UACtB,IAAIC,EAAQH,KAAKI,mBACW,UAAxBD,EAAMnL,MAAM2D,QACdwH,EAAMnL,MAAM2D,QAAU,OAEtBwH,EAAMnL,MAAM2D,QAAU,WA7apB,4CAibP,IAGD,gCACE,uBACA,8BACE,wBAAQxE,MAAM,kBAAkBb,QAAS,kBAAMR,EAAS,eAAxD,yBAEF,uBACA,8BACE,wBAAQqB,MAAM,kBAAkBb,QAAS,kBAAMR,EAAS,iBAAxD,6BAGkB,OAAlBmI,QAAkB,IAAlBA,OAAA,EAAAA,EAAoB3O,QAAS,GAE7B,gCACE,oBAAI0G,UAAU,OAAOgC,MAAO,CAACsE,MAAO,SAApC,wBACA,sBAAKtG,UAAU,OAAf,oBAAuBiI,EAAmB,UAA1C,aAAuB,EAAuBrF,WAA9C,uBAA6E,qBAAK0C,IAAKC,EAAWvD,MAAO,CAACwD,MAAO,OAAQC,OAAQ,aACjI,wBAAOtE,MAAM,2BAAb,UACE,gCACE,+BACE,6CACA,wCACA,wCACA,qCACA,8CACA,uCACA,0CACA,4CAGJ,uCACK8G,QADL,IACKA,OADL,EACKA,EAAoBpG,KAAI,SAAAnH,GAAM,OAC7B,+BACE,oCAAKA,QAAL,IAAKA,OAAL,EAAKA,EAAQkI,aACb,8BAAW,OAANlI,QAAM,IAANA,OAAA,EAAAA,EAAQiD,QAAR,OAAiBjD,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAQiD,OAAS,IACvC,8BAAW,OAANjD,QAAM,IAANA,OAAA,EAAAA,EAAQ6D,QAAR,OAAiB7D,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAQ6D,OAAS,IACvC,8BAAW,OAAN7D,QAAM,IAANA,OAAA,EAAAA,EAAQ+O,KAAR,OAAc/O,QAAd,IAAcA,OAAd,EAAcA,EAAQ+O,IAAM,IACjC,oCAAK/O,QAAL,IAAKA,OAAL,EAAKA,EAAQ+Q,cACb,oCAAK/Q,QAAL,IAAKA,OAAL,EAAKA,EAAQgR,gBACb,oCAAKhR,QAAL,IAAKA,OAAL,EAAKA,EAAQkR,mBACb,oCAAKlR,QAAL,IAAKA,OAAL,EAAKA,EAAQmR,2BAKvB,oBAAI7J,MAAO,CAACqL,UAAW,OAAQ/G,MAAO,SAAtC,0BACA,cAAC,GAAD,CACE9M,KAAK,SACLwB,KAAMqN,EACN3B,YAAa,IACbC,YAAa,MAEf,oBAAI3E,MAAO,CAACqL,UAAW,OAAQ/G,MAAO,SAAtC,0BACA,cAAC,GAAD,CACE9M,KAAK,SACLwB,KAAMuN,EACN7B,YAAa,IACbC,YAAa,MAEf,oBAAI3E,MAAO,CAACqL,UAAW,OAAQ/G,MAAO,SAAtC,uBACA,cAAC,GAAD,CACE9M,KAAK,MACLwB,KAAMyN,EACN/B,YAAa,IACbC,YAAa,SAKjB,sBAAK3E,MAAO,CAACsL,aAAc,QAA3B,UACE,oBAAItL,MAAO,CAACsL,aAAc,OAAQD,UAAW,OAAQ/G,MAAO,SAA5D,8BADF,OAGI/K,aAHJ,IAGIA,QAHJ,UAGIA,OAAQ2B,KAAKiL,UAHjB,aAGI,EAA+BtG,KAAI,SAACiI,EAAoBxH,GAAS,IAAD,sCACxD8J,EAAmB,OAAGtC,QAAH,IAAGA,OAAH,EAAGA,EAAoBG,MAAM,KAChDuC,EAAW,UAAGrE,EAAgB2B,UAAnB,aAAG,EAAqC0C,YACzD,OACE,qCACE,wBAAQrL,MAAM,iBAAd,SAA+B,qBAAKa,MAAO,CAACsE,MAAO,SAApB,SAA8B,4BAAI8F,EAAoBtD,KAAK,YAC1F,qBAAK3H,MAAM,QAAX,SACE,sBAAKa,MAAO,CAACsL,aAAc,QAA3B,UACE,gCAAK,wCAAL,OAAoBxD,QAApB,IAAoBA,GAApB,UAAoBA,EAAoBG,MAAM,YAA9C,aAAoB,EAAgCpI,KAAI,SAAAnH,GAAM,OAAI,6BAAKA,UACvE,wBAAOyG,MAAM,sBAAb,UACE,gCACE,sCAEIiL,QAFJ,IAEIA,OAFJ,EAEIA,EAAqBvK,KAAI,SAACnH,EAAQ4H,GAAT,OACvB,6BACW,GAAPA,EAAW,SAAmB,GAAPA,EAAW,SAAX,kBAAiCA,EAAI,QAIpE,2CAGJ,uCAEI/G,aAFJ,IAEIA,QAFJ,UAEIA,OAAQ2B,KAAR,UAAaiL,EAAgB2B,UAA7B,aAAa,EAAqCR,sBAFtD,aAEI,EAAkEzH,KAAI,SAAA+H,GAAY,IAAD,IAC/E,OACE,sCACGA,QADH,IACGA,GADH,UACGA,EAASK,MAAM,YADlB,aACG,EAAqBpI,KAAI,SAACnH,EAAQ4H,GAAT,OAAiB,6BAAK5H,OAChD,uCAAKyN,EAAgB2B,UAArB,aAAK,EAAqCR,cAAcM,gBAOpE,oBAAI5H,MAAO,CAACsE,MAAO,SAAnB,kCACA,wBAAOnF,MAAM,2BAAb,UACE,gCACE,+BACE,6CACA,wCACA,wCACA,qCACA,8CACA,uCACA,0CACA,4CAGJ,0CACKgH,EAAgB2B,UADrB,iBACK,EAAqC7B,0BAD1C,aACK,EAAyDpG,KAAI,SAAAnH,GAAM,OAClE,+BACE,oCAAKA,QAAL,IAAKA,OAAL,EAAKA,EAAQkI,aACb,8BAAW,OAANlI,QAAM,IAANA,OAAA,EAAAA,EAAQiD,QAAR,OAAiBjD,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAQiD,OAAS,IACvC,8BAAW,OAANjD,QAAM,IAANA,OAAA,EAAAA,EAAQ6D,QAAR,OAAiB7D,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAQ6D,OAAS,IACvC,8BAAW,OAAN7D,QAAM,IAANA,OAAA,EAAAA,EAAQ+O,KAAR,OAAc/O,QAAd,IAAcA,OAAd,EAAcA,EAAQ+O,IAAM,IACjC,oCAAK/O,QAAL,IAAKA,OAAL,EAAKA,EAAQ+Q,cACb,oCAAK/Q,QAAL,IAAKA,OAAL,EAAKA,EAAQgR,gBACb,oCAAKhR,QAAL,IAAKA,OAAL,EAAKA,EAAQkR,mBACb,oCAAKlR,QAAL,IAAKA,OAAL,EAAKA,EAAQmR,2BAKvB,oBAAI7J,MAAO,CAACsE,MAAO,SAAnB,iEACA,wBAAOnF,MAAM,2BAAb,UACE,gCACE,+BACE,gDACA,6CACA,wCACA,wCACA,qCACA,mDAGJ,0CACG5F,OAAO2B,KAAP,UAAYiL,EAAgB2B,UAA5B,aAAY,EAAqCyB,gCADpD,aACG,EAA2E1J,KAAI,SAAC0L,EAAeC,GAAhB,2BAC9EjS,OAAO2B,KAAP,UAAYiL,EAAgB2B,UAA5B,iBAAY,EAAqCyB,wBAAwBgC,UAAzE,aAAY,EAA6ErE,0BADX,aAC9E,EAA6GrH,KAAI,SAAAnH,GAAM,2BACrH,qBAAuCsF,UAAWwN,EAAe,IAAM,EAAI,aAAe,YAA1F,UACE,6BAAKD,IACL,6BAAK7S,IACL,uCAAKyN,EAAgB2B,UAArB,iBAAK,EAAqCyB,wBAAwBgC,UAAlE,aAAK,EAA6ErE,kBAAkBxO,KACpG,uCAAKyN,EAAgB2B,UAArB,iBAAK,EAAqCyB,wBAAwBgC,UAAlE,aAAK,EAA6EpE,kBAAkBzO,KACpG,uCAAKyN,EAAgB2B,UAArB,iBAAK,EAAqCyB,wBAAwBgC,UAAlE,aAAK,EAA6EnE,eAAe1O,KACjG,uCAAKyN,EAAgB2B,UAArB,iBAAK,EAAqCyB,wBAAwBgC,UAAlE,aAAK,EAA6ElE,gBAAgB3O,OANpG,UAAY6S,EAAZ,YAA6B7S,eAYrC,oBAAIsH,MAAO,CAACsE,MAAO,SAAnB,wDACA,wBAAOnF,MAAM,2BAAb,UACE,gCACE,+BACE,gDACA,6CACA,wCACA,wCACA,qCACA,mDAGJ,0CACG5F,OAAO2B,KAAP,UAAYiL,EAAgB2B,UAA5B,aAAY,EAAqC0B,0CADpD,aACG,EAAqF3J,KAAI,SAAC0L,EAAeC,GAAhB,2BACxFjS,OAAO2B,KAAP,UAAYiL,EAAgB2B,UAA5B,iBAAY,EAAqC0B,kCAAkC+B,UAAnF,aAAY,EAAuFrE,0BADX,aACxF,EAAuHrH,KAAI,SAAAnH,GAAM,2BAC/H,qBAAuCsF,UAAWwN,EAAe,IAAM,EAAI,aAAe,YAA1F,UACE,6BAAKD,IACL,6BAAK7S,IACL,uCAAKyN,EAAgB2B,UAArB,iBAAK,EAAqC0B,kCAAkC+B,UAA5E,aAAK,EAAuFrE,kBAAkBxO,KAC9G,uCAAKyN,EAAgB2B,UAArB,iBAAK,EAAqC0B,kCAAkC+B,UAA5E,aAAK,EAAuFpE,kBAAkBzO,KAC9G,uCAAKyN,EAAgB2B,UAArB,iBAAK,EAAqC0B,kCAAkC+B,UAA5E,aAAK,EAAuFnE,eAAe1O,KAC3G,uCAAKyN,EAAgB2B,UAArB,iBAAK,EAAqC0B,kCAAkC+B,UAA5E,aAAK,EAAuFlE,gBAAgB3O,OAN9G,UAAY6S,EAAZ,YAA6B7S,eAYrC,oBAAIsH,MAAO,CAACsE,MAAO,SAAnB,gCACA,wBAAOnF,MAAM,oBAAb,UACE,gCACE,+BACE,6CACA,wCACA,uCACA,sCACA,0CAGJ,uCAEIiL,QAFJ,IAEIA,OAFJ,EAEIA,EAAqBvK,KAAI,SAAAnH,GAAM,mBAC7B,+BACE,6BAAKA,IACL,uCAAK8R,EAAY9R,UAAjB,aAAK,EAAqB+R,SAC1B,uCAAKD,EAAY9R,UAAjB,aAAK,EAAqBgS,QAC1B,uCAAKF,EAAY9R,UAAjB,aAAK,EAAqBiS,OAC1B,uCAAKH,EAAY9R,UAAjB,aAAK,EAAqBkS,0BAMpC,oBAAI5K,MAAO,CAACsE,MAAO,SAAnB,iCACA,wBAAOnF,MAAM,oBAAb,UACE,gCACE,+BACE,6CACA,4DAGJ,0CAEI5F,OAAO2B,KAAKiL,EAAgB2B,GAAoBc,0BAFpD,iBAEI,EACE3P,MAAK,SAACC,EAAIC,GAAL,OAAYgN,EAAgB2B,GAAoBc,kBAAkBzP,GAAMgN,EAAgB2B,GAAoBc,kBAAkB1P,aAHzI,aAEI,EAEE2G,KAAI,SAAAnH,GAAM,OACV,+BACE,6BAAKA,IACL,6BAAKyN,EAAgB2B,GAAoBc,kBAAkBlQ,gBAMrE,oBAAIsH,MAAO,CAACsE,MAAO,SAAnB,sDACA,wBAAOnF,MAAM,oBAAb,UACE,gCACE,+BACE,gDACA,4CAGJ,0CAEI5F,OAAO2B,KAAKiL,EAAgB2B,GAAoBe,2BAFpD,iBAEI,EACE5P,MAAK,SAACC,EAAIC,GAAL,OAAYgN,EAAgB2B,GAAoBe,mBAAmB1P,GAAMgN,EAAgB2B,GAAoBe,mBAAmB3P,aAH3I,aAEI,EAEE2G,KAAI,SAAAnH,GAAM,OACV,+BACE,6BAAKA,IACL,6BAAKyN,EAAgB2B,GAAoBe,mBAAmBnQ,gBAMtE,oBAAIsH,MAAO,CAACsE,MAAO,SAAnB,6CACA,wBAAOnF,MAAM,oBAAb,UACE,gCACE,+BACE,gDACA,4CAGJ,0CAEI5F,OAAO2B,KAAKiL,EAAgB2B,GAAoBiB,qCAFpD,iBAEI,EACE9P,MAAK,SAACC,EAAIC,GAAL,OAAYgN,EAAgB2B,GAAoBiB,6BAA6B5P,GAAMgN,EAAgB2B,GAAoBiB,6BAA6B7P,aAH/J,aAEI,EAEE2G,KAAI,SAAAnH,GAAM,OACV,+BACE,6BAAKA,IACL,6BAAKyN,EAAgB2B,GAAoBiB,6BAA6BrQ,gBAMhF,oBAAIsH,MAAO,CAACqL,UAAW,OAAQ/G,MAAO,SAAtC,0BACA,cAAC,GAAD,CACE9M,KAAI,iBAAY8I,GAChBtH,KAAI,OAAEmN,QAAF,IAAEA,GAAF,UAAEA,EAAkB2B,UAApB,aAAE,EAAuCzB,gBAC7C3B,YAAa,IACbC,YAAa,MAEf,oBAAI3E,MAAO,CAACqL,UAAW,OAAQ/G,MAAO,SAAtC,0BACA,cAAC,GAAD,CACE9M,KAAI,iBAAY8I,GAChBtH,KAAI,OAAEmN,QAAF,IAAEA,GAAF,UAAEA,EAAkB2B,UAApB,aAAE,EAAuCvB,gBAC7C7B,YAAa,IACbC,YAAa,MAEf,oBAAI3E,MAAO,CAACqL,UAAW,OAAQ/G,MAAO,SAAtC,uBACA,cAAC,GAAD,CACE9M,KAAI,cAAS8I,GACbtH,KAAI,OAAEmN,QAAF,IAAEA,GAAF,UAAEA,EAAkB2B,UAApB,aAAE,EAAuCrB,aAC7C/B,YAAa,IACbC,YAAa,wBCznBtB8G,GA7JC,SAAChH,GAAW,IAAD,IACzB,EAA+B5G,YAAazH,GAA5C,mBAAOU,EAAP,KACA,GADA,UACwBkG,mBAAS,KAAjC,mBAAOxF,EAAP,KAAaiH,EAAb,KACMO,EAAa,uCAAG,gCAAArI,EAAA,sEAEZI,EAAIC,YAAMC,YAAWX,EAAI,SAAUY,YAAM,MAAO,KAAR,OAAcJ,QAAd,IAAcA,OAAd,EAAcA,EAAMK,MAFhD,SAGAC,YAAQL,GAHR,OAGZ+B,EAHY,OAIZE,EAAOF,EAAIzB,KAAK,GAAG2B,OACzByF,EAAQzF,EAAKxB,MALK,gDAOlBI,QAAQC,MAAR,MACAC,MAAM,6CARY,yDAAH,qDAYbgG,EAAWC,cAEjB,EAAwBf,mBAAS,IAAjC,mBAAOjB,EAAP,KAAa2P,EAAb,KACA,EAA8B1O,mBAAS,IAAvC,mBAAOpE,EAAP,KAAgB+H,EAAhB,KAEA,EAAsC3D,mBAAS,IAA/C,mBAAOwN,EAAP,KAAoBmB,EAApB,KAEMC,EAASC,cAAYD,OAE3BvO,oBAAS,sBAAC,oCAAA1G,EAAA,6DACRqI,IADQ,SAEkBnD,IAFlB,OAEFJ,EAFE,OAIFM,EAAON,EAAYqQ,MAAK,SAAA/P,GAAI,OAAIA,EAAKL,WAAakQ,KAGlDhT,EAPE,OAOQmD,QAPR,IAOQA,OAPR,EAOQA,EAAMnD,QACtB8S,EAAQ3P,GACR4E,EAAW/H,GAEL4R,EAAc,GACb,OAAP5R,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACf8R,EAAY9R,GAAU,CACpB+R,OAAQ,EACRC,MAAO,EACPC,KAAM,EACNC,aAAc,MAId,OAAJ7O,QAAI,IAAJA,GAAA,UAAAA,EAAMM,kBAAN,SAAkBxD,SAAQ,SAAAwC,GACjB,OAAPzC,QAAO,IAAPA,KAASC,SAAQ,SAAAH,GACf,IAAMqH,EAASzE,OAAOD,EAAM3C,IACb,IAAXqH,EACFyK,EAAY9R,GAAQ+R,QAAU,EACV,KAAX1K,EACTyK,EAAY9R,GAAQgS,OAAS,EACpB3K,EAAS,IAAMA,EAAS,KACjCyK,EAAY9R,GAAQiS,MAAQ,GAEhB,IAAV5K,IACFyK,EAAY9R,GAAQkS,cAAgB,SAI1ChT,QAAQ6C,IAAI+P,GACZmB,EAAenB,GArCP,4CAsCP,IAEH,IAAMuB,EAAgB,uCAAG,sBAAApV,EAAA,sDACvB0D,EAAW0B,EAAKzB,OAChBwD,EAAS,gBAFc,2CAAH,qDAKtB,OACE,gCACE,uBACA,wBAAQqB,MAAM,uBAAuBb,QAAS,kBAAMR,EAAS,eAA7D,uBACA,uBACA,wBAAQqB,MAAM,uBAAuBb,QAAS,kBAAMR,EAAS,iBAA7D,0BACA,uBACA,wBAAQqB,MAAM,uBAAuBb,QAAS,kBAAMR,EAAS,eAA7D,wBACA,qBAAIE,UAAU,OAAOgC,MAAO,CAACsE,MAAO,SAApC,mCAA8DvI,QAA9D,IAA8DA,OAA9D,EAA8DA,EAAME,QACpE,+CACA,oCAEIrD,QAFJ,IAEIA,OAFJ,EAEIA,EAASiH,KAAI,SAAAnH,GAAM,aAAI,+BAAKA,EAAL,YAAeqD,QAAf,IAAeA,GAAf,UAAeA,EAAMR,qBAArB,aAAe,EAAqBuQ,MAAK,SAAAE,GAAU,OAAIA,EAAWxU,OAASkB,KAAQ8C,MAAnF,YAG3B,gDACA,oCAEIO,QAFJ,IAEIA,GAFJ,UAEIA,EAAMR,qBAFV,aAEI,EAAqBsE,KAAI,SAAAnH,GAAM,OAAI,+BAAKA,EAAOlB,KAAZ,KAAoBkB,EAAO8C,MAA3B,YAGvC,wDAAoBO,QAApB,IAAoBA,OAApB,EAAoBA,EAAMX,UAC1B,iDAAaW,QAAb,IAAaA,OAAb,EAAaA,EAAMJ,OAAnB,IAA2B,qBAAK2H,IAAKC,EAAWvD,MAAO,CAACwD,MAAO,OAAQC,OAAQ,aAC/E,iDAAa1H,QAAb,IAAaA,OAAb,EAAaA,EAAMQ,UACnB,oBAAIyD,MAAO,CAACsE,MAAO,SAAnB,0BACA,wBAAOnF,MAAM,oBAAb,UACE,gCACE,gCACU,OAAPvG,QAAO,IAAPA,OAAA,EAAAA,EAAStB,QAAS,GAAK,wCAD1B,OAEGsB,QAFH,IAEGA,OAFH,EAEGA,EAASiH,KAAI,SAAAnH,GAAM,OAAI,6BAAKA,YAGjC,yCACGqD,QADH,IACGA,GADH,UACGA,EAAMM,kBADT,aACG,EAAkBwD,KAAI,SAACxE,EAAOiF,GAAR,OACrB,cAAC,WAAD,UACE,cAAC,EAAD,CACEjF,MAAOA,EACPgE,WAAYiB,EACZ1H,QAASA,EACTwC,OAAM,OAAEW,QAAF,IAAEA,OAAF,EAAEA,EAAMM,WACdmD,SAAS,SAIf,qBAAIL,MAAM,QAAV,UACE,6BAAI,wCADN,OAIIvG,QAJJ,IAIIA,OAJJ,EAIIA,EAASiH,KAAI,SAAAnH,GAAM,aAAI,oCAAKqD,QAAL,IAAKA,GAAL,UAAKA,EAAMR,qBAAX,aAAK,EAAqBuQ,MAAK,SAAAE,GAAU,OAAIA,EAAWxU,OAASkB,KAAQ8C,oBAKxG,oBAAIwE,MAAO,CAACsE,MAAO,SAAnB,gCACA,wBAAOnF,MAAM,oBAAb,UACE,gCACE,+BACE,6CACA,wCACA,uCACA,sCACA,0CAGJ,uCAEIvG,QAFJ,IAEIA,OAFJ,EAEIA,EAASiH,KAAI,SAAAnH,GAAM,mBACjB,+BACE,6BAAKA,IACL,uCAAK8R,EAAY9R,UAAjB,aAAK,EAAqB+R,SAC1B,uCAAKD,EAAY9R,UAAjB,aAAK,EAAqBgS,QAC1B,uCAAKF,EAAY9R,UAAjB,aAAK,EAAqBiS,OAC1B,uCAAKH,EAAY9R,UAAjB,aAAK,EAAqBkS,0BAOzB,UAATpT,GACA,wBAAQyG,KAAK,SAASkB,MAAM,kBAAkBb,QAASyN,EAAvD,wBCtHOE,OAzBf,WACE,OACE,cAACC,EAAA,EAAD,CAAWlO,UAAU,mDAAmDgC,MAAO,CAAEmM,UAAW,SAA5F,SACE,qBAAKnO,UAAU,QAAQgC,MAAO,CAAEoM,SAAU,SAA1C,SACE,cAAC,IAAD,CAAQC,SAAS,sBAAjB,SACE,cAACvP,EAAD,UACE,eAAC,IAAD,WAEE,cAAC,IAAD,CAAOwP,OAAK,EAACC,KAAK,IAAIC,QAAS,cAAC,EAAD,MAC/B,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,YAAYC,QAAS,cAAC,EAAD,MACvC,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,SAASC,QAAS,cAAC,EAAD,MACpC,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,aAAaC,QAAS,cAAC,EAAD,MACxC,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,kBAAkBC,QAAS,cAAC,GAAD,MAC7C,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,WAAWC,QAAS,cAAC,GAAD,MACtC,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,eAAeC,QAAS,cAAC,GAAD,MAC1C,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,aAAaC,QAAS,cAAC,GAAD,MACxC,cAAC,IAAD,CAAOF,OAAK,EAACC,KAAK,uBAAuBC,QAAS,cAAC,GAAD,kB,OCzBhEC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEF9B,SAAS+B,eAAe,W","file":"static/js/main.81948219.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport {\n  GoogleAuthProvider,\n  getAuth,\n  signInWithPopup,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  sendPasswordResetEmail,\n  signOut,\n} from \"firebase/auth\";\n\nimport {\n  getFirestore,\n  query,\n  getDocs,\n  collection,\n  where,\n  addDoc,\n  updateDoc,\n  doc,\n  deleteDoc\n} from \"firebase/firestore\";\n\nconst app = initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID\n});\n\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\nconst googleProvider = new GoogleAuthProvider();\nconst signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: \"google\",\n        email: user.email,\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst logInWithEmailAndPassword = async (email, password) => {\n  try {\n    await signInWithEmailAndPassword(auth, email, password);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst registerWithEmailAndPassword = async (name, email, password) => {\n  try {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    await addDoc(collection(db, \"users\"), {\n      uid: user.uid,\n      name,\n      authProvider: \"local\",\n      email,\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst sendPasswordReset = async (email) => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    alert(\"Password reset link sent!\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst logout = () => {\n  signOut(auth);\n};\n\nconst registerPlayer = async (player) => {\n  try {\n    // let playersObj = {};\n    // Object.assign(playersObj, players);\n    await addDoc(collection(db, \"registered_players\"), player);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst getRegisteredPlayers = async () => {\n  const players = [];\n  try {\n    const q = query(collection(db, \"registered_players\"));\n    const docs = await getDocs(q);\n    docs.forEach((doc) => {\n      players.push(doc?.data()?.name);\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  } finally {\n    players?.sort((p1, p2) => p1?.id - p2?.id);\n    return players;\n  }\n};\n\nconst savePlayers = async (players) => {\n  try {\n    let playersObj = {};\n    Object.assign(playersObj, players);\n    await addDoc(collection(db, \"players\"), playersObj);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst getPlayers = async () => {\n  const players = [];\n  try {\n    const q = query(collection(db, \"players\"));\n    const docs = await getDocs(q);\n    docs.forEach((doc) => {\n      players.push(doc.data());\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  } finally {\n    return players;\n  }\n};\n\nconst saveRoundData = async (roundData) => {\n  try {\n    roundData['roundNumber'] = Date.now();\n    await addDoc(collection(db, \"game\"), roundData);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst updateRoundData = async (roundData) => {\n  try {\n    const q = query(collection(db, \"game\"), where(\"id\", \"==\", roundData.id));\n    const docs = await getDocs(q);\n    docs.forEach(async (d) => {\n      const docRef = doc(db, \"game\", d.id);\n      await updateDoc(docRef, roundData);\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst deleteRoundData = async (roundId) => {\n  try {\n    const q = query(collection(db, \"game\"), where(\"id\", \"==\", roundId));\n    const docs = await getDocs(q);\n    docs.forEach(async (d) => {\n      const docRef = doc(db, \"game\", d.id);\n      await deleteDoc(docRef);\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst deleteGame = async (docId) => {\n  try {\n    const gameQuery = query(collection(db, \"game_history\"), where(\"id\", \"==\", docId));\n    const gameDoc = await getDocs(gameQuery);\n    console.log(gameDoc);\n    const docRef = doc(db, \"game_history\", docId);\n    console.log(docRef);\n    await deleteDoc(docRef);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst getGameData = async () => {\n  const gameData = [];\n  try {\n    const q = query(collection(db, \"game\"));\n    const docs = await getDocs(q);\n    docs.forEach((doc) => {\n      gameData.push(doc.data());\n    });\n    gameData?.sort((round1, round2) => round1?.roundNumber - round2?.roundNumber);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  } finally {\n    return gameData;\n  }\n};\n\nconst saveGame = async() => {\n  try {\n    await saveGameHistory();\n    const gameQuery = query(collection(db, \"game\"));\n    const gameDocs = await getDocs(gameQuery);\n    gameDocs.forEach(async (d) => {\n      const docRef = doc(db, \"game\", d.id);\n      await deleteDoc(docRef);\n    });\n    const playersQuery = query(collection(db, \"players\"));\n    const playerDocs = await getDocs(playersQuery);\n    playerDocs.forEach(async (d) => {\n      const docRef = doc(db, \"players\", d.id);\n      await deleteDoc(docRef);\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst saveGameHistory = async() => {\n  try {\n    //get players\n    const players = [];\n\n    const playersQuery = query(collection(db, \"players\"));\n    const playerDocs = await getDocs(playersQuery);\n    playerDocs.forEach(async (d) => {\n      const playersObj = d?.data();\n      Object.keys(playersObj)?.forEach(player => {\n        players.push(playersObj[player]);\n      });\n    });\n\n    //player scores\n    const playerTotals = {};\n    players?.forEach(player => playerTotals[player] = 0);\n\n    //get rounds\n    const rounds = [];\n    const gameQuery = query(collection(db, \"game\"));\n    const gameDocs = await getDocs(gameQuery);\n    gameDocs.forEach(async (d) => {\n      const round = d?.data();\n      rounds.push(round);\n      players?.forEach(player => {\n        playerTotals[player] += Number(round[player]);\n      });\n    });\n    rounds?.sort((round1, round2) => round1?.roundNumber - round2?.roundNumber);\n\n    const playerRanking = [];\n    players?.forEach(player => {\n      playerRanking.push({\n        name: player,\n        total: playerTotals[player]\n      });\n    });\n    playerRanking?.sort((p1, p2) => p1?.total - p2?.total);\n\n    const gameHistory = {\n      utcDateMS: Date.now(),\n      rounds,\n      players,\n      playerRanking,\n      winner: playerRanking[0]?.name\n    };\n    // console.log(JSON.stringify(gameHistory));\n    await addDoc(collection(db, \"game_history\"), gameHistory);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst discardGame = async() => {\n  try {\n    const gameQuery = query(collection(db, \"game\"));\n    const gameDocs = await getDocs(gameQuery);\n    gameDocs.forEach(async (d) => {\n      const docRef = doc(db, \"game\", d.id);\n      await deleteDoc(docRef);\n    });\n    const playersQuery = query(collection(db, \"players\"));\n    const playerDocs = await getDocs(playersQuery);\n    playerDocs.forEach(async (d) => {\n      const docRef = doc(db, \"players\", d.id);\n      await deleteDoc(docRef);\n    });\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst getGameHistoryData = async () => {\n  const gameHistoryData = [];\n  try {\n    const q = query(collection(db, \"game_history\"));\n    const docs = await getDocs(q);\n    docs.forEach((doc) => {\n      const game = doc.data();\n      const gameDate = new Date(game?.utcDateMS);\n      gameHistoryData.push({\n        docId: doc.id,\n        utcDateMS: game?.utcDateMS,\n        playerRanking: game?.playerRanking,\n        players: game?.players,\n        date: (gameDate.getMonth()+1) + \"/\" + gameDate.getDate() + \"/\" + gameDate.getFullYear(),\n        rounds: game?.rounds?.length,\n        roundsData: game?.rounds,\n        winner: game?.winner,\n        winnerScore: game?.playerRanking?.[0]?.total,\n        runner: game?.playerRanking?.[1]?.name,\n        runnerScore: game?.playerRanking?.[1]?.total\n      });\n    });\n    gameHistoryData?.sort((game1, game2) => game2?.utcDateMS - game1?.utcDateMS);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  } finally {\n    return gameHistoryData;\n  }\n};\n\nexport {\n  auth,\n  db,\n  signInWithGoogle,\n  logInWithEmailAndPassword,\n  registerWithEmailAndPassword,\n  sendPasswordReset,\n  logout,\n  registerPlayer,\n  getRegisteredPlayers,\n  savePlayers,\n  getPlayers,\n  saveRoundData,\n  updateRoundData,\n  deleteRoundData,\n  getGameData,\n  saveGame,\n  discardGame,\n  deleteGame,\n  getGameHistoryData\n};\n","import { createUserWithEmailAndPassword } from '@firebase/auth';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { auth } from '../firebase';\n\nconst AuthContext = React.createContext()\n\nexport const useAuth = () => {\n    return useContext(AuthContext);\n};\n\nexport function AuthProvider({ children }) {\n    const [currentUser, setCurrentUser] = useState();\n    const [loading, setLoading] = useState(true);\n\n    function signup(email, password) {\n        return createUserWithEmailAndPassword(auth, email, password);\n    }\n\n    useEffect(() => {\n        const unsubscribe = auth.onAuthStateChanged(user => {\n            setCurrentUser(user);\n            setLoading(false);\n        })\n\n        return unsubscribe;\n    }, []);\n\n\n    const value = {\n        currentUser,\n        signup\n    };\n\n    return (\n        <AuthContext.Provider value={value}>\n            {!loading && children}\n        </AuthContext.Provider>\n    );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { auth, logInWithEmailAndPassword, signInWithGoogle } from \"./../firebase\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\n// import \"./Login.css\";\nfunction Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [user, loading, error] = useAuthState(auth);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (loading) {\n      // maybe trigger a loading screen\n      return;\n    }\n    if (user) navigate(\"/dashboard\");\n  }, [user, loading]);\n  return (\n    <div className=\"login\">\n      <div className=\"login__container\">\n        <input\n          type=\"text\"\n          className=\"m-1\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"E-mail Address\"\n        />\n        <br></br>\n        <input\n          type=\"password\"\n          className=\"m-1\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Password\"\n        />\n        <br></br>\n        <button\n          className=\"btn btn-success m-1\"\n          onClick={() => logInWithEmailAndPassword(email, password)}\n        >\n          Login\n        </button>\n        <br></br>\n        <button className=\"btn btn-success m-1\" onClick={signInWithGoogle}>\n          Login with Google\n        </button>\n        <div>\n          <Link to=\"/reset\">Forgot Password</Link>\n        </div>\n        <div>\n          Don't have an account? <Link to=\"/register\">Register</Link> now.\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default Login;","import React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport {\n  auth,\n  registerWithEmailAndPassword,\n  signInWithGoogle,\n} from \"./../firebase\";\n// import \"./Register.css\";\nfunction Register() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [user, loading, error] = useAuthState(auth);\n  // const history = useHistory();\n  const navigate = useNavigate();\n  const register = () => {\n    if (!name) alert(\"Please enter name\");\n    registerWithEmailAndPassword(name, email, password);\n  };\n  useEffect(() => {\n    if (loading) return;\n    // if (user) history.replace(\"/dashboard\");\n    if (user) navigate(\"/dashboard\");\n  }, [user, loading]);\n  return (\n    <div className=\"register\">\n      <div className=\"register__container\">\n        <input\n          type=\"text\"\n          className=\"register__textBox\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          placeholder=\"Full Name\"\n        />\n        <input\n          type=\"text\"\n          className=\"register__textBox\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"E-mail Address\"\n        />\n        <input\n          type=\"password\"\n          className=\"register__textBox\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder=\"Password\"\n        />\n        <button className=\"register__btn\" onClick={register}>\n          Register\n        </button>\n        <button\n          className=\"register__btn register__google\"\n          onClick={signInWithGoogle}\n        >\n          Register with Google\n        </button>\n        <div>\n          Already have an account? <Link to=\"/\">Login</Link> now.\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default Register;\n","import React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { auth, sendPasswordReset } from \"./../firebase\";\n// import \"./Reset.css\";\nfunction Reset() {\n  const [email, setEmail] = useState(\"\");\n  const [user, loading, error] = useAuthState(auth);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (loading) return;\n    if (user) navigate(\"/dashboard\");\n  }, [user, loading]);\n  return (\n    <div className=\"reset\">\n      <div className=\"reset__container\">\n        <input\n          type=\"text\"\n          className=\"reset__textBox\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"E-mail Address\"\n        />\n        <button\n          className=\"reset__btn\"\n          onClick={() => sendPasswordReset(email)}\n        >\n          Send password reset email\n        </button>\n        <div>\n          Don't have an account? <Link to=\"/register\">Register</Link> now.\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default Reset;\n","import React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useNavigate } from \"react-router-dom\";\n// import \"./Dashboard.css\";\nimport { auth, db, getGameData, logout } from \"./../firebase\";\nimport { query, collection, getDocs, where } from \"firebase/firestore\";\nfunction Dashboard() {\n  const [user, loading, error] = useAuthState(auth);\n  const [name, setName] = useState(\"\");\n  const [isPlayer, setIsPlayer] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const navigate = useNavigate();\n  const fetchUserName = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setName(data.name);\n      if (data.name === 'player') {\n        setIsPlayer(true);\n      }\n      if (data.name === 'admin') {\n        setIsAdmin(true);\n      }\n      } catch (err) {\n      console.error(err);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n\n  const [gameInProgress, setGameInProgress] = useState(false);\n  useEffect(async() => {\n    if (loading) return;\n    if (!user) return navigate(\"/\");\n    await fetchUserName();\n\n    const gameData = await getGameData();\n    setGameInProgress(gameData?.length > 0);\n  }, [user, loading]);\n  return (\n    <div className=\"dashboard\">\n       <div className=\"dashboard__container\">\n        Logged in as\n         <div>{name}</div>\n         <div>{user?.email}</div>\n         {\n          isPlayer &&\n          <div>\n            <button class=\"btn btn-success my-1\" onClick={() => navigate(\"/registerplayer\")}>Register Player</button>\n          </div>\n         }\n         {\n          isPlayer &&\n          <div>\n            <button class=\"btn btn-success my-1\" onClick={() => navigate(\"/newgame\")}>\n              { gameInProgress ? 'Continue Game' : 'New Game' }\n            </button>\n          </div>\n         }\n         {\n          (isPlayer || isAdmin) &&\n          <div>\n            <button class=\"btn btn-success my-1\" onClick={() => navigate(\"/gamehistory\")}>Game History</button>\n          </div>\n         }\n         {\n          isPlayer &&\n          <div>\n            <button class=\"btn btn-success my-1\" onClick={() => navigate(\"/gamestats\")}>Game Stats</button>\n          </div>\n        }\n         <div>\n          <button class=\"btn btn-success my-1\" onClick={logout}>Logout</button>\n         </div>\n       </div>\n     </div>\n  );\n}\nexport default Dashboard;\n","import React from \"react\";\n\nconst ReadOnlyRow = ({ round, roundIndex, players, rounds, handleEditClick, handleDeleteClick, oldGame }) => {\n  //calculate subround total - start\n  const subRoundTotal = [];\n  let playerSubScores = {};\n  players?.forEach(player => playerSubScores[player] = 0);\n  for(let i = 0; i <= rounds?.length; i++) {\n    if (i > 0 && i % players?.length == 0) {\n      let playerSubScoresTemp = Object.assign({}, playerSubScores);\n      subRoundTotal[(i / players?.length) - 1] = playerSubScoresTemp;\n    }\n    if (i < rounds?.length) {\n      players?.forEach(player => {\n        playerSubScores[player] += Number(rounds[i][player]);\n      });\n    }\n  }\n  //calculate subround total - end\n  if (roundIndex > 0 && roundIndex % players.length === 0) {\n    return (\n      <>\n        <tr class=\"round-total\">\n          <td><b>Round {roundIndex/players.length}</b></td>\n          {\n            players?.map(player => <td>{subRoundTotal?.[(roundIndex / players.length) - 1]?.[player]}</td>)\n          }\n        </tr>\n        <tr>\n          {\n            !oldGame ? \n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-success mx-1\"\n                onClick={(event) => handleEditClick(event, round)}\n              >\n                Edit\n              </button>\n              <button type=\"button\" class=\"btn btn-warning\" onClick={() => handleDeleteClick(round.id)}>\n                Delete\n              </button>\n            </td>\n            : <td>{roundIndex + 1}</td>\n          }\n          {\n            players?.map(player => {\n              const points = Number(round[player]);\n              const style = {};\n              if (points <= 25) {\n                style['color'] = 'green';\n              } else if (points > 25 && points <= 50) {\n                style['color'] = 'orange';\n              } else if (points > 50) {\n                style['color'] = 'red';\n              }\n              return <td style={style}>{round[player]}</td>;\n            })\n          }\n        </tr>\n      </>\n    );\n  }\n  return (\n    <tr>\n      {\n        !oldGame ?\n        <td>\n          <button\n            type=\"button\"\n            class=\"btn btn-success mx-1\"\n            onClick={(event) => handleEditClick(event, round)}\n          >\n            Edit\n          </button>\n          <button type=\"button\" class=\"btn btn-warning\" onClick={() => handleDeleteClick(round.id)}>\n            Delete\n          </button>\n        </td>\n        : <td>{roundIndex + 1}</td>\n      }\n      {\n        // Object.keys(round)?.map(key => {\n        //   if(key !== 'id') {\n        //     return (<td>{round[key]}</td>);\n        //   }\n        // })\n        players?.map(player => {\n          const points = Number(round[player]);\n          const style = {};\n          if (points <= 25) {\n            style['color'] = 'green';\n          } else if (points > 25 && points <= 50) {\n            style['color'] = 'orange';\n          } else if (points > 50) {\n            style['color'] = 'red';\n          }\n          return <td style={style}>{round[player]}</td>;\n        })\n      }\n    </tr>\n  );\n};\n\nexport default ReadOnlyRow;","import React from \"react\";\n\nconst EditableRow = ({\n  editRoundData,\n  handleEditRoundChange,\n  handleCancelClick,\n}) => {\n  return (\n    <tr>\n      <td>\n        <button type=\"submit\" class=\"btn btn-success mx-1\">Save</button>\n        <button type=\"button\" class=\"btn btn-warning\" onClick={handleCancelClick}>\n          Cancel\n        </button>\n      </td>\n      {Object.keys(editRoundData)?.map((key, idx) => {\n        if(key !== 'id') {\n          return (\n            <td>\n              <input\n                type=\"text\"\n                required=\"required\"\n                placeholder=\"Enter points...\"\n                name=\"fullName\"\n                value={editRoundData[key]}\n                onChange={(e) => {\n                  handleEditRoundChange(e, idx);\n                }}\n              ></input>\n            </td>\n          );\n        }\n      })}\n    </tr>\n  );\n};\n\nexport default EditableRow;","export default __webpack_public_path__ + \"static/media/winner-cup.dc77caad.png\";","import React, { useState, Fragment, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { nanoid } from \"nanoid\";\nimport ReadOnlyRow from \"./ReadOnlyRow\";\nimport EditableRow from \"./EditableRow\";\nimport { deleteRoundData, getGameData, getPlayers, getRegisteredPlayers, saveGame, discardGame, savePlayers, saveRoundData, updateRoundData } from \"../firebase\";\n\nimport WinnerCup from './../assets/winner-cup.png';\nimport \"./NewGame.css\";\n\nconst NewGame = () => {\n  const navigate = useNavigate();\n\n  const [registeredPlayers, setRegisteredPlayers] = useState([]);\n  const [players, setPlayers] = useState([]);\n  const [playerName, setPlayerName] = useState('');\n\n  const [rounds, setRounds] = useState([]);\n  const [addRoundData, setAddRoundData] = useState({\n  });\n\n  const [allPlayersAdded, setAllPlayersAdded] = useState(false);\n\n  const [playerScores, setPlayerScores] = useState({});\n\n  const [gameOver, setGameOver] = useState(false);\n  const [winner, setWinner] = useState('');\n\n  useEffect(async () => {\n    const regsiteredPlayers = await getRegisteredPlayers();\n    setRegisteredPlayers(regsiteredPlayers);\n\n    const gameData = await getGameData();\n    setRounds(gameData);\n    // const currentPlayers = [];\n    // gameData?.length > 0 && Object.keys(gameData?.[0]).forEach((key) => {\n    //   if(key !== 'id') {\n    //     currentPlayers.push(key);\n    //   }\n    // });\n    // setPlayers(currentPlayers);\n    \n    const savedPlayers = await getPlayers();\n    const tempSavedPlayers = [];\n    if(savedPlayers.length > 0) {\n      setAllPlayersAdded(true);\n      if(players?.length != savedPlayers?.length) {\n        Object.keys(savedPlayers[0]).map((key) => {\n          tempSavedPlayers[key] = savedPlayers[0][key];\n        });\n        setPlayers(tempSavedPlayers);\n      }\n    }\n\n    const playerScoresTemp = {};\n    tempSavedPlayers?.forEach(player => playerScoresTemp[player] = 0);\n    gameData?.forEach(round => {\n      tempSavedPlayers?.forEach(player => {\n        playerScoresTemp[player] += Number(round[player]);\n      });\n    });\n    setPlayerScores(playerScoresTemp);\n\n    let lowScore = 350;\n    tempSavedPlayers?.forEach(player => {\n    // players?.forEach(player => {\n      if(playerScoresTemp[player] > 350) {\n        setGameOver(true);\n      }\n      if(playerScoresTemp[player] < lowScore) {\n        lowScore = playerScoresTemp[player];\n        setWinner(player);\n      }\n    });\n\n  }, []);\n\n  const handleAddPlayerChange = (event) => {\n    event.preventDefault();\n\n    const fieldValue = event.target.value;\n\n    setPlayerName(fieldValue);\n  };\n\n  const handleAddPlayerSubmit = (event) => {\n    event.preventDefault();\n\n    !players?.includes(playerName) && playerName && players.push(playerName);\n    setPlayerName('');\n\n    setPlayers(players);\n  };\n\n  const savePlayersHandler = async (event) => {\n    event.preventDefault();\n    \n    await savePlayers(players);\n\n    const savedPlayers = await getPlayers();\n    const tempSavedPlayers = [];\n    if(savedPlayers.length > 0) {\n      setAllPlayersAdded(true);\n      if(players?.length != savedPlayers?.length) {\n        Object.keys(savedPlayers[0]).map((key) => {\n          tempSavedPlayers[key] = savedPlayers[0][key];\n        });\n        setPlayers(tempSavedPlayers);\n      }\n    }\n  }\n\n  const [editRoundData, setEditRoundData] = useState({\n  });\n\n  const [editRoundId, setEditRoundId] = useState(null);\n\n  const handleAddRoundChange = (event, index) => {\n    event.preventDefault();\n\n    const fieldValue = event.target.value;\n\n    const newRoundData = { ...addRoundData };\n    // newRoundData[index] = fieldValue;\n    newRoundData[players[index]] = fieldValue;\n\n    setAddRoundData(newRoundData);\n  };\n\n  const handleEditRoundChange = (event, index) => {\n    event.preventDefault();\n\n    const fieldValue = event.target.value;\n\n    const newRoundData = { ...editRoundData };\n    // newRoundData[index] = fieldValue;\n    newRoundData[players[index]] = fieldValue;\n\n    setEditRoundData(newRoundData);\n  };\n\n  const handleAddRoundSubmit = async (event) => {\n    event.preventDefault();\n\n    const newRound = {\n      id: nanoid()\n    };\n    players?.map((player, idx) => {\n      // newRound[idx] = addRoundData[idx];\n      newRound[players[idx]] = addRoundData[players[idx]];\n    });\n\n    const newRounds = [...rounds, newRound];\n    Object.keys(addRoundData)?.map((data, idx) => {\n      // addRoundData[idx] = '';\n      addRoundData[players[idx]] = '';\n    });\n    setRounds(newRounds);\n    await saveRoundData(newRound);\n\n    const playerScoresTemp = {};\n    players?.forEach(player => playerScoresTemp[player] = 0);\n    newRounds?.forEach(round => {\n      players?.forEach(player => {\n        playerScoresTemp[player] += Number(round[player]);\n      });\n    });\n    setPlayerScores(playerScoresTemp);\n\n    let lowScore = 350;\n    players?.forEach(player => {\n      if(playerScoresTemp[player] > 350) {\n        setGameOver(true);\n      }\n      if(playerScoresTemp[player] < lowScore) {\n        lowScore = playerScoresTemp[player];\n        setWinner(player);\n      }\n    });\n\n    window.location.reload();\n  };\n\n  const handleEditRoundSubmit = async (event) => {\n    event.preventDefault();\n\n    const editedRound = {\n      id: editRoundId\n    };\n    players?.map((player, idx) => {\n      // editedRound[idx] = editRoundData[idx];\n      editedRound[players[idx]] = editRoundData[players[idx]];\n    });\n\n    const newRounds = [...rounds];\n\n    const index = rounds.findIndex((round) => round.id === editRoundId);\n\n    newRounds[index] = editedRound;\n    // newRounds[players[index]] = editedRound;\n\n    setRounds(newRounds);\n    setEditRoundId(null);\n    await updateRoundData(editedRound);\n  };\n\n  const handleEditClick = (event, round) => {\n    event.preventDefault();\n    setEditRoundId(round.id);\n\n    const roundValues = {\n    };\n    players?.map((player, idx) => {\n      // roundValues[idx] = round[idx];\n      roundValues[players[idx]] = round[players[idx]];\n    });\n\n    setEditRoundData(roundValues);\n  };\n\n  const handleCancelClick = () => {\n    setEditRoundId(null);\n  };\n\n  const handleDeleteClick = (roundId) => {\n    const newRounds = [...rounds];\n\n    const index = rounds.findIndex((round) => round.id === roundId);\n\n    newRounds.splice(index, 1);\n\n    setRounds(newRounds);\n    deleteRoundData(roundId);\n  };\n\n  const saveGameHandler = async () => {\n    await saveGame();\n    navigate(\"/dashboard\");\n  };\n\n  const discardGameHandler = async () => {\n    await discardGame();\n    navigate(\"/dashboard\");\n  };\n\n  const getPlayerTurn = () => {\n    if(rounds?.length == 0 || rounds?.length % players?.length == 0) {\n      return players[players?.length - 1];\n    }\n    return players[(rounds?.length % players?.length) - 1];\n  };\n\n  const getWinningPlayer = () => {\n    let leadingPlayer = '';\n    let leadingScore = 351;\n    players?.forEach(player => {\n      if(playerScores[player] < leadingScore) {\n        leadingScore = playerScores[player];\n        leadingPlayer = player;\n      }\n    });\n    return leadingPlayer;\n  };\n\n  const getLosingPlayer = () => {\n    let leadingPlayer = '';\n    let leadingScore = 0;\n    players?.forEach(player => {\n      if(playerScores[player] > leadingScore) {\n        leadingScore = playerScores[player];\n        leadingPlayer = player;\n      }\n    });\n    return leadingPlayer;\n  };\n\n  return (\n    <div>\n      { allPlayersAdded && \n        <>\n          <div><b>Dealer:</b> { players?.length > 0 && getPlayerTurn() }</div>\n          <div><b>Least:</b> { getWinningPlayer() ?? 'TBD' } <img src={WinnerCup} style={{width: '20px', height: '20px'}}></img> </div>\n          <div><b>Highest:</b> { getLosingPlayer() ?? 'TBD' }</div>\n        </>\n      }\n      {\n        !allPlayersAdded && \n        <div style={{display: 'flex', flexDirection: 'column'}}>\n          <h2>Select Player</h2>\n          <form style={{flexDirection: 'column'}} onSubmit={handleAddPlayerSubmit}>\n            {/* <input\n              type=\"text\"\n              name=\"player\"\n              value={playerName}\n              required=\"required\"\n              placeholder=\"Enter Player Name...\"\n              onChange={handleAddPlayerChange}\n            /> */}\n            <div style={{display: 'flex', flexDirection: 'column'}} onChange={handleAddPlayerChange}>\n              {registeredPlayers?.map(player => \n                <div style={{ marginRight: '10px' }}>\n                  <input\n                    type=\"radio\"\n                    name=\"playerName\"\n                    value={player}\n                  />\n                  {player}\n                </div>\n              )}\n            </div>\n            <button type=\"submit\" class=\"btn btn-success\" style={{width: '150px'}}>Add Player</button>\n            <button class=\"btn btn-success\" style={{width: '150px'}} onClick={savePlayersHandler} disabled={players.length <= 1}>Start Game</button>\n          </form>\n        </div>\n      }\n      {\n        !gameOver && \n        <div className=\"app-container\">\n          <form onSubmit={handleEditRoundSubmit}>\n            <table class=\"table rummy-table\">\n              <thead>\n                <tr>\n                  {players?.length > 0 && <th>Round</th>}\n                  {players?.map(player => <th>{player}</th>)}\n                </tr>\n              </thead>\n              <tbody>\n                {rounds?.map((round, idx) => (\n                  <Fragment>\n                    {editRoundId === round.id ? (\n                      <EditableRow\n                        editRoundData={editRoundData}\n                        handleEditRoundChange={handleEditRoundChange}\n                        handleCancelClick={handleCancelClick}\n                      />\n                    ) : (\n                      <ReadOnlyRow\n                        round={round}\n                        roundIndex={idx}\n                        players={players}\n                        handleEditClick={handleEditClick}\n                        handleDeleteClick={handleDeleteClick}\n                        rounds={rounds}\n                      />\n                    )}\n                  </Fragment>\n                ))}\n                <tr class=\"total\">\n                  <td><b>Total</b></td>\n                  {\n                    players?.map(player => <td>{playerScores[player]}</td>)\n                  }\n                </tr>\n              </tbody>\n            </table>\n          </form>\n\n          {/* <h2>Enter Round Scores</h2> */}\n          <form onSubmit={handleAddRoundSubmit}>\n            <table class=\"table\">\n              <tbody>\n                <tr>\n                  <td>\n                    <button type=\"submit\" class=\"btn btn-success\" style={{width: '150px'}} disabled={!allPlayersAdded}>Add</button>\n                  </td>\n                  {players?.map((player, idx) => \n                    <td>\n                      <input\n                        type=\"text\"\n                        style={{width: '100px'}}\n                        name=\"fullName\"\n                        // value={addRoundData[idx]}\n                        value={addRoundData[players[idx]]}\n                        required=\"required\"\n                        placeholder=\"Enter points...\"\n                        onChange={\n                          (e) => {\n                            handleAddRoundChange(e, idx);\n                          }}\n                      />\n                    </td>\n                  )}\n                </tr>\n              </tbody>\n            </table>\n          </form>\n        </div>\n      }\n      {\n        gameOver && \n        <div>\n          <div>{winner} won the game!!<img src={WinnerCup} style={{width: '25px', height: '25px'}}></img></div>\n          <div>\n            <button class=\"btn btn-success my-1\" onClick={saveGameHandler} disabled={!allPlayersAdded}>Save Game</button>\n          </div>\n          <div>\n            <button class=\"btn btn-warning my-1\" onClick={discardGameHandler} disabled={!allPlayersAdded}>Discard</button>\n          </div>\n        </div>\n      }\n      <button class=\"btn btn-success\" onClick={() => navigate(\"/dashboard\")}>Dashboard</button>\n      {/* <button className=\"dashboard_btn\" onClick={() => navigate(\"/newgame\")}>Refresh</button> */}\n    </div>\n  );\n};\n\nexport default NewGame;","import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getRegisteredPlayers, registerPlayer } from \"../firebase\";\n\nimport \"./NewGame.css\";\n\nconst RegisterPlayer = () => {\n  const navigate = useNavigate();\n\n  const [players, setPlayers] = useState([]);\n  const [playerName, setPlayerName] = useState('');\n\n  useEffect(async () => {\n    const savedPlayers = await getRegisteredPlayers();\n    setPlayers(savedPlayers);\n  }, []);\n\n  const handleRegisterPlayerChange = (event) => {\n    event.preventDefault();\n\n    const fieldValue = event.target.value;\n\n    setPlayerName(fieldValue);\n  };\n\n  const handleRegisterPlayerSubmit = async (event) => {\n    event.preventDefault();\n    \n    await registerPlayer({\n      name: playerName,\n      id: Date.now()\n    });\n\n    setPlayerName('');\n    const savedPlayers = await getRegisteredPlayers();\n    setPlayers(savedPlayers);\n  };\n\n  return (\n    <div>\n      <div>\n        <h2>Players</h2>\n        <form onSubmit={handleRegisterPlayerSubmit}>\n          <input\n            type=\"text\"\n            name=\"player\"\n            value={playerName}\n            required=\"required\"\n            placeholder=\"Enter Player Name...\"\n            onChange={handleRegisterPlayerChange}\n          />\n          <button type=\"submit\" class=\"btn btn-success\">Register</button>\n        </form>\n      </div>\n      {\n        players?.length > 0 &&\n        <div class=\"mt-2\">\n          <table class=\"table register-player\">\n            <thead>\n              <tr>\n                <th>Player Number</th>\n                <th>Player Name</th>\n              </tr>\n            </thead>\n            <tbody>\n                {players?.map((player, idx) => \n                  <tr>\n                    <td>{idx+1}</td>\n                    <td>{player}</td>\n                  </tr>\n                )}\n              </tbody>\n          </table>\n        </div>\n      }\n      <button class=\"btn btn-success\" onClick={() => navigate(\"/dashboard\")}>Dashboard</button>\n    </div>\n  );\n};\n\nexport default RegisterPlayer;","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getGameHistoryData } from \"../firebase\";\n\nconst GameHistory = () => {\n  const navigate = useNavigate();\n\n  const [gameHistory, setGameHistory] = useState([]);\n\n  useEffect(async () => {\n    const gameHistory = await getGameHistoryData();\n    setGameHistory(gameHistory);\n  }, []);\n\n  return (\n    <div>\n      <br></br>\n      <div>\n        <button class=\"btn btn-success\" onClick={() => navigate(\"/dashboard\")}>Dashboard</button>\n      </div>\n      <br></br>\n      <div>\n        <button class=\"btn btn-success\" onClick={() => navigate(\"/gamestats\")}>Game Stats</button>\n      </div>\n      <h1 className=\"mt-3\" style={{color: 'green'}}>Game History</h1>\n      {\n        gameHistory?.length > 0 &&\n        <div>\n          <table class=\"table history-table\">\n            <thead>\n              <tr>\n                <th>Date</th>\n                <th>Rounds Played</th>\n                <th>Winner</th>\n                <th>Runner</th>\n              </tr>\n            </thead>\n            <tbody>\n                {gameHistory?.map(game => \n                  <tr>\n                    <td><a href={`/rummy-score-tracker/gamehistory/${game?.utcDateMS}`}>{game?.date}</a></td>\n                    <td>{game?.rounds}</td>\n                    <td>{game?.winner} <br></br> ({game?.winnerScore})</td>\n                    <td>{game?.runner} <br></br> ({game?.runnerScore})</td>\n                  </tr>\n                )}\n              </tbody>\n          </table>\n        </div>\n      }\n    </div>\n  );\n};\n\nexport default GameHistory;","import React, { useEffect } from 'react';\nimport * as d3 from 'd3';\n\nfunction PieChart(props) {\n  const {\n    name,\n    data,\n    outerRadius,\n    innerRadius,\n  } = props;\n\n  const margin = {\n    top: 50, right: 50, bottom: 50, left: 50,\n  };\n\n  const width = 2 * outerRadius + margin.left + margin.right;\n  const height = 2 * outerRadius + margin.top + margin.bottom;\n\n  // const colorScale = d3     \n  //   .scaleSequential()      \n  //   .interpolator(d3.interpolateCool)      \n  //   .domain([0, data.length]);\n\n  const colorScale = d3.scaleOrdinal(d3.schemeCategory10);\n\n  useEffect(() => {\n    drawChart();\n  }, [data]);\n\n  function drawChart() {\n    // Remove the old svg\n    d3.select('#pie-container'+'-'+name)\n      .select('svg')\n      .remove();\n\n    // Create new svg\n    const svg = d3\n      .select('#pie-container'+'-'+name)\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .attr('transform', `translate(${width / 2}, ${height / 2})`);\n\n    const arcGenerator = d3\n      .arc()\n      .innerRadius(innerRadius)\n      .outerRadius(outerRadius);\n\n    const pieGenerator = d3\n      .pie()\n      .padAngle(0)\n      .value((d) => d.value);\n\n    const arc = svg\n      .selectAll()\n      .data(pieGenerator(data))\n      .enter();\n\n    // Append arcs\n    arc\n      .append('path')\n      .attr('d', arcGenerator)\n      .style('fill', (_, i) => colorScale(i))\n      .style('stroke', '#ffffff')\n      .style('stroke-width', 0);\n\n    // Append text labels\n    arc\n      .append('text')\n      .attr('text-anchor', 'middle')\n      .attr('alignment-baseline', 'middle')\n      .text((d) => d.data.label)\n      // .style('fill', (_, i) => colorScale(data.length - i))\n      // .style('fill', 'white')\n      .style('fill', '#E3F2E6') // same as html body background color\n      .attr('transform', (d) => {\n        const [x, y] = arcGenerator.centroid(d);\n        return `translate(${x}, ${y})`;\n      });\n  }    \n\n  return <div id={\"pie-container\"+\"-\"+name} />;\n}\n\nexport default PieChart;","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getGameHistoryData } from \"../firebase\";\n\nimport WinnerCup from './../assets/winner-cup.png';\nimport PieChart from \"./PieChart\";\n\nconst GameStats = () => {\n  const navigate = useNavigate();\n\n  const [playerWinnerRunner, setPlayerWinnerRunner] = useState([]);\n\n  const [playerGameCombo, setPlayerGameCombo] = useState({});\n\n  const [winnerChartData, setWinnerChartData] = useState([]);\n  const [runnerChartData, setRunnerChartData] = useState([]);\n  const [outChartData, setOutChartData] = useState([]);\n\n  // const getLexicographicallySmallestRotation = (str) => {\n  //   const doubled = str + str;\n  //   const n = str.length;\n  //   let smallestRotation = str;\n  \n  //   for (let i = 1; i < n; i++) {\n  //     const rotation = doubled.slice(i, i + n);\n  //     if (rotation < smallestRotation) {\n  //       smallestRotation = rotation;\n  //     }\n  //   }\n  \n  //   return smallestRotation;\n  // };\n\n  // const getLexicographicallySmallestRotation = (str) => {\n  //   const doubled = str + str;\n  //   const n = str.length / 2;\n  //   let smallestRotation = str;\n    \n  //   for (let i = 1; i < n; i++) {\n  //       const rotation = doubled.slice(i * (str.indexOf(' -> ') + 4), i * (str.indexOf(' -> ') + 4) + str.length);\n  //       if (rotation < smallestRotation) {\n  //           smallestRotation = rotation;\n  //       }\n  //   }\n    \n  //   return smallestRotation;\n  // };\n\n  const getLexicographicallySmallestRotation = (players) => {\n    const n = players.length;\n    let smallestRotation = players.join(' -> ');\n    \n    // Generate all rotations\n    for (let i = 1; i < n; i++) {\n        // Rotate the array\n        const rotation = players.slice(i).concat(players.slice(0, i)).join(' -> ');\n        \n        // Compare to find the smallest rotation\n        if (rotation < smallestRotation) {\n            smallestRotation = rotation;\n        }\n    }\n    \n    return smallestRotation;\n  };\n\n  useEffect(async () => {\n    const gameHistory = await getGameHistoryData();\n\n    const playerWinnerCount = {};\n    const playerRunnerCount = {};\n    const playerOutCount = {};\n    const playerGameCount = {};\n    const gameWinsCount = {};\n    const playerGameCombo = {};\n    gameHistory?.forEach(game => {\n      //winner\n      let winCount = playerWinnerCount[game?.winner];\n      if(!winCount) {\n        playerWinnerCount[game?.winner] = 1;\n      } else {\n        playerWinnerCount[game?.winner] = winCount+1;\n      }\n      //runner\n      let runnerCount = playerRunnerCount[game?.runner];\n      if(!runnerCount) {\n        playerRunnerCount[game?.runner] = 1;\n      } else {\n        playerRunnerCount[game?.runner] = runnerCount+1;\n      }\n      //out\n      const out = game?.playerRanking?.[game?.playerRanking?.length - 1]?.name;\n      let outCount = playerOutCount[out];\n      if(!outCount) {\n        playerOutCount[out] = 1;\n      } else {\n        playerOutCount[out] = outCount+1;\n      }\n      //player game count\n      game?.playerRanking?.forEach(player => {\n        let gameCount = playerGameCount[player?.name];\n        if(!gameCount) {\n          playerGameCount[player?.name] = 1;\n        } else {\n          playerGameCount[player?.name] = gameCount+1;\n        }\n      });\n      //ranking\n      const gameWin = [];\n      game?.playerRanking?.map((player, idx) => gameWin.push(player?.name));\n      let gameWinCount = gameWinsCount[gameWin];\n      if(!gameWinCount) {\n        gameWinsCount[gameWin] = 1;\n      } else {\n        gameWinsCount[gameWin] = gameWinCount+1;\n      }\n      //player game combo\n      const playerGameComboKey = game?.playerRanking?.map(player => player?.name)?.sort()?.join(',');\n      let playerGameComboCount = playerGameCombo[playerGameComboKey];\n      if(!playerGameComboCount) {\n        playerGameCombo[playerGameComboKey] = {games: [game]};\n      } else {\n        playerGameCombo[playerGameComboKey]?.games?.push(game);\n      }\n      Object.keys(gameWinsCount).forEach(gameWin => {\n        const gameWinPlayers = gameWin?.split(',');\n        const gameWinPlayersSorted = gameWinPlayers?.sort();\n        const gameWinPlayersSortedKey = gameWinPlayersSorted?.join(',');\n        let gameWinsCountTemp = playerGameCombo[gameWinPlayersSortedKey]?.gameWinsCount?.gameWin;\n        if(!gameWinsCountTemp) {\n          if(!playerGameCombo[gameWinPlayersSortedKey]?.gameWinsCount) {\n            playerGameCombo[gameWinPlayersSortedKey]['gameWinsCount'] = {};\n          }\n        }\n        playerGameCombo[gameWinPlayersSortedKey].gameWinsCount[gameWin] = gameWinsCount[gameWin];\n        // Convert object to array of key-value pairs\n        const gameWinsCountEntries = Object.entries(playerGameCombo[gameWinPlayersSortedKey].gameWinsCount);\n        // Sort the array based on values\n        gameWinsCountEntries?.sort((g1, g2) => g2?.[1] - g1?.[1]);\n        // Convert sorted array back to object\n        const sortedGameWinsCount = gameWinsCountEntries?.reduce((acc, [key, value]) => {\n          acc[key] = value;\n          return acc;\n        }, {});\n        // Assign the sorted object back to the original structure\n        playerGameCombo[gameWinPlayersSortedKey].gameWinsCount = sortedGameWinsCount;\n      });\n    });\n    //player winner runner out counts by game combo - start\n    Object.keys(playerGameCombo)?.forEach(playerGameComboKey => {\n      const playerGameComboObj = playerGameCombo[playerGameComboKey];\n      const playerWinnerCount = {};\n      const playerRunnerCount = {};\n      const playerOutCount = {};\n      const playerGameCount = {};\n      const playerDealerCount = {};\n      const playerSeatingCount = {};\n      const playerSeatingGames = {};\n      const playerNormalizedSeatingCount = {};\n      const playerNormalizedSeatingGames = {};\n      playerGameComboObj?.games?.forEach(game => {\n        //winner\n        let winCount = playerWinnerCount[game?.winner];\n        if(!winCount) {\n          playerWinnerCount[game?.winner] = 1;\n        } else {\n          playerWinnerCount[game?.winner] = winCount+1;\n        }\n        //runner\n        let runnerCount = playerRunnerCount[game?.runner];\n        if(!runnerCount) {\n          playerRunnerCount[game?.runner] = 1;\n        } else {\n          playerRunnerCount[game?.runner] = runnerCount+1;\n        }\n        //out\n        const out = game?.playerRanking?.[game?.playerRanking?.length - 1]?.name;\n        let outCount = playerOutCount[out];\n        if(!outCount) {\n          playerOutCount[out] = 1;\n        } else {\n          playerOutCount[out] = outCount+1;\n        }\n        //player game count\n        game?.playerRanking?.forEach(player => {\n          let gameCount = playerGameCount[player?.name];\n          if(!gameCount) {\n            playerGameCount[player?.name] = 1;\n          } else {\n            playerGameCount[player?.name] = gameCount+1;\n          }\n        });\n        //dealer count\n        const dealer = game?.players[game?.players?.length - 1];\n        let dealerCount = playerDealerCount[dealer];\n        if(!dealerCount) {\n          playerDealerCount[dealer] = 1;\n        } else {\n          playerDealerCount[dealer] = dealerCount+1;\n        }\n        //seating count\n        const seatingKey = game?.players?.join(' -> ');\n        let seatingCount = playerSeatingCount[seatingKey];\n        if(!seatingCount) {\n          playerSeatingCount[seatingKey] = 1;\n        } else {\n          playerSeatingCount[seatingKey] = seatingCount+1;\n        }\n        //seating count stats\n        let seatingCountGames = playerSeatingGames[seatingKey];\n        if(!seatingCountGames) {\n          playerSeatingGames[seatingKey] = {games: [game]};\n        } else {\n          playerSeatingGames[seatingKey]?.games?.push(game);\n        }\n        //lexicographically smallest rotation\n        // const normalizedSeatingKey = getLexicographicallySmallestRotation(game?.players?.join(' -> '));\n        const normalizedSeatingKey = getLexicographicallySmallestRotation(game?.players);\n        let normalizedSeatingCount = playerNormalizedSeatingCount[normalizedSeatingKey];\n        if(!normalizedSeatingCount) {\n          playerNormalizedSeatingCount[normalizedSeatingKey] = 1;\n        } else {\n          playerNormalizedSeatingCount[normalizedSeatingKey] = normalizedSeatingCount+1;\n        }\n        //normalized seating count stats\n        let normalizedSeatingCountGames = playerNormalizedSeatingGames[normalizedSeatingKey];\n        if(!normalizedSeatingCountGames) {\n          playerNormalizedSeatingGames[normalizedSeatingKey] = {games: [game]};\n        } else {\n          playerNormalizedSeatingGames[normalizedSeatingKey]?.games?.push(game);\n        }\n      });\n      playerGameCombo[playerGameComboKey].playerWinnerCount = playerWinnerCount;\n      playerGameCombo[playerGameComboKey].playerRunnerCount = playerRunnerCount;\n      playerGameCombo[playerGameComboKey].playerOutCount = playerOutCount;\n      playerGameCombo[playerGameComboKey].playerGameCount = playerGameCount;\n      playerGameCombo[playerGameComboKey].playerDealerCount = playerDealerCount;\n      playerGameCombo[playerGameComboKey].playerSeatingCount = playerSeatingCount;\n      playerGameCombo[playerGameComboKey].playerSeatingCountStats = {};\n      playerGameCombo[playerGameComboKey].playerNormalizedSeatingCount = playerNormalizedSeatingCount;\n      playerGameCombo[playerGameComboKey].playerNormalizedSeatingCountStats = {};\n      playerGameCombo[playerGameComboKey].playerWinnerRunner = [];\n      playerGameCombo[playerGameComboKey].winnerChartData = [];\n      playerGameCombo[playerGameComboKey].runnerChartData = [];\n      playerGameCombo[playerGameComboKey].outChartData = [];\n      playerGameComboKey?.split(',')?.forEach(player => {\n        playerGameCombo[playerGameComboKey].playerWinnerRunner.push({\n          playerName: player,\n          winner: playerWinnerCount[player],\n          runner: playerRunnerCount[player],\n          out: playerOutCount[player],\n          gamesPlayed: playerGameCount[player],\n          winPercentage: playerWinnerCount[player] ? Math.round((playerWinnerCount[player] / playerGameCount[player]) * 100) : 0,\n          runnerPercentage: playerRunnerCount[player] ? Math.round((playerRunnerCount[player] / playerGameCount[player]) * 100) : 0,\n          outPercentage: playerOutCount[player] ? Math.round((playerOutCount[player] / playerGameCount[player]) * 100) : 0\n        });\n        playerGameCombo[playerGameComboKey].winnerChartData.push({\n          label: player,\n          value: playerGameCombo[playerGameComboKey].playerWinnerCount[player]\n        });\n        playerGameCombo[playerGameComboKey].runnerChartData.push({\n          label: player,\n          value: playerGameCombo[playerGameComboKey].playerRunnerCount[player]\n        });\n        playerGameCombo[playerGameComboKey].outChartData.push({\n          label: player,\n          value: playerGameCombo[playerGameComboKey].playerOutCount[player]\n        });\n      });\n      playerGameCombo[playerGameComboKey].playerWinnerRunner?.sort((p1, p2) => p2?.winPercentage - p1?.winPercentage);\n      //player game stats by seating\n      Object.keys(playerSeatingGames)?.forEach(seatingKey => {\n        console.log('seatingKey', seatingKey);\n        const playerSeatingGamesObj = playerSeatingGames[seatingKey];\n        const playerWinnerCount = {};\n        const playerRunnerCount = {};\n        const playerOutCount = {};\n        const playerGameCount = {};\n        playerSeatingGamesObj?.games?.forEach(game => {\n          //winner\n          let winCount = playerWinnerCount[game?.winner];\n          if(!winCount) {\n            playerWinnerCount[game?.winner] = 1;\n          } else {\n            playerWinnerCount[game?.winner] = winCount+1;\n          }\n          //runner\n          let runnerCount = playerRunnerCount[game?.runner];\n          if(!runnerCount) {\n            playerRunnerCount[game?.runner] = 1;\n          } else {\n            playerRunnerCount[game?.runner] = runnerCount+1;\n          }\n          //out\n          const out = game?.playerRanking?.[game?.playerRanking?.length - 1]?.name;\n          let outCount = playerOutCount[out];\n          if(!outCount) {\n            playerOutCount[out] = 1;\n          } else {\n            playerOutCount[out] = outCount+1;\n          }\n          //player game count\n          game?.playerRanking?.forEach(player => {\n            let gameCount = playerGameCount[player?.name];\n            if(!gameCount) {\n              playerGameCount[player?.name] = 1;\n            } else {\n              playerGameCount[player?.name] = gameCount+1;\n            }\n          });\n        });\n        const sortedPlayerWinnerCount = Object.entries(playerWinnerCount)\n        .sort(([, a], [, b]) => b - a)\n        .reduce((acc, [key, value]) => {\n          acc[key] = value;\n          return acc;\n        }, {});\n        const sortedPlayerRunnerCount = Object.entries(playerRunnerCount)\n        .sort(([, a], [, b]) => b - a)\n        .reduce((acc, [key, value]) => {\n          acc[key] = value;\n          return acc;\n        }, {});\n        const sortedPlayerOutCount = Object.entries(playerOutCount)\n        .sort(([, a], [, b]) => b - a)\n        .reduce((acc, [key, value]) => {\n          acc[key] = value;\n          return acc;\n        }, {});\n        playerGameCombo[playerGameComboKey].playerSeatingCountStats[seatingKey] = {\n          playerWinnerCount: sortedPlayerWinnerCount,\n          playerRunnerCount: sortedPlayerRunnerCount,\n          playerOutCount: sortedPlayerOutCount,\n          playerGameCount\n        };\n      });\n      //player game stats by normalized seating\n      Object.keys(playerNormalizedSeatingGames)?.forEach(seatingKey => {\n        console.log('seatingKey', seatingKey);\n        const playerNormalizedSeatingGamesObj = playerNormalizedSeatingGames[seatingKey];\n        const playerWinnerCount = {};\n        const playerRunnerCount = {};\n        const playerOutCount = {};\n        const playerGameCount = {};\n        playerNormalizedSeatingGamesObj?.games?.forEach(game => {\n          //winner\n          let winCount = playerWinnerCount[game?.winner];\n          if(!winCount) {\n            playerWinnerCount[game?.winner] = 1;\n          } else {\n            playerWinnerCount[game?.winner] = winCount+1;\n          }\n          //runner\n          let runnerCount = playerRunnerCount[game?.runner];\n          if(!runnerCount) {\n            playerRunnerCount[game?.runner] = 1;\n          } else {\n            playerRunnerCount[game?.runner] = runnerCount+1;\n          }\n          //out\n          const out = game?.playerRanking?.[game?.playerRanking?.length - 1]?.name;\n          let outCount = playerOutCount[out];\n          if(!outCount) {\n            playerOutCount[out] = 1;\n          } else {\n            playerOutCount[out] = outCount+1;\n          }\n          //player game count\n          game?.playerRanking?.forEach(player => {\n            let gameCount = playerGameCount[player?.name];\n            if(!gameCount) {\n              playerGameCount[player?.name] = 1;\n            } else {\n              playerGameCount[player?.name] = gameCount+1;\n            }\n          });\n        });\n        const sortedPlayerWinnerCount = Object.entries(playerWinnerCount)\n        .sort(([, a], [, b]) => b - a)\n        .reduce((acc, [key, value]) => {\n          acc[key] = value;\n          return acc;\n        }, {});\n        const sortedPlayerRunnerCount = Object.entries(playerRunnerCount)\n        .sort(([, a], [, b]) => b - a)\n        .reduce((acc, [key, value]) => {\n          acc[key] = value;\n          return acc;\n        }, {});\n        const sortedPlayerOutCount = Object.entries(playerOutCount)\n        .sort(([, a], [, b]) => b - a)\n        .reduce((acc, [key, value]) => {\n          acc[key] = value;\n          return acc;\n        }, {});\n        playerGameCombo[playerGameComboKey].playerNormalizedSeatingCountStats[seatingKey] = {\n          playerWinnerCount: sortedPlayerWinnerCount,\n          playerRunnerCount: sortedPlayerRunnerCount,\n          playerOutCount: sortedPlayerOutCount,\n          playerGameCount\n        };\n      });\n    });\n    //player winner runner out counts by game combo - end\n    const gameWins = [];\n    const playersParticipated = [];\n    Object?.keys(gameWinsCount)?.map(g => {\n      const obj = {\n        players: g?.split(','),\n        wins: gameWinsCount[g]\n      };\n      obj?.players?.forEach(player => !playersParticipated.includes(player) && playersParticipated.push(player));\n      gameWins.push(obj);\n    });\n    gameWins?.sort((game1, game2) => game2.wins - game1.wins);\n    //player stats by game combo - start\n    Object?.keys(playerGameCombo)?.forEach(playerGameComboKey => {\n      const playerGameComboObj = playerGameCombo[playerGameComboKey];\n      const playerStats = {};\n      playerGameComboKey.split(',')?.forEach(player => {\n        playerStats[player] = {\n          rummys: 0,\n          drops: 0,\n          outs: 0,\n          seventyFives: 0\n        }\n      });\n      playerGameComboObj?.games?.forEach(game => {\n        playersParticipated?.forEach(player => {\n          game?.roundsData?.forEach(round => {\n            const points = Number(round[player]);\n            if (points === 0) {\n              playerStats[player].rummys += 1;\n            } else if (points === 25) {\n              playerStats[player].drops += 1;\n            } else if (points > 25 && points < 75) {\n              playerStats[player].outs += 1;\n            }\n            if (points == 75) {\n              playerStats[player].seventyFives += 1;\n            }\n          });\n        });\n      });\n      playerGameCombo[playerGameComboKey].playerStats = playerStats;\n    });\n    //player stats by game combo - end\n    setPlayerGameCombo(playerGameCombo);\n\n    const playerWinnerRunner = [];\n    Object?.keys(playerWinnerCount)?.forEach(player => {\n    // playersParticipated?.forEach(player => {\n      playerWinnerRunner.push({\n        playerName: player,\n        winner: playerWinnerCount[player],\n        runner: playerRunnerCount[player],\n        out: playerOutCount[player],\n        gamesPlayed: playerGameCount[player],\n        winPercentage: playerWinnerCount[player] ? Math.round((playerWinnerCount[player] / playerGameCount[player]) * 100) : 0,\n        runnerPercentage: playerRunnerCount[player] ? Math.round((playerRunnerCount[player] / playerGameCount[player]) * 100) : 0,\n        outPercentage: playerOutCount[player] ? Math.round((playerOutCount[player] / playerGameCount[player]) * 100) : 0\n      });\n      winnerChartData.push({\n        label: player,\n        value: playerWinnerCount[player]\n      });\n      runnerChartData.push({\n        label: player,\n        value: playerRunnerCount[player]\n      });\n      outChartData.push({\n        label: player,\n        value: playerOutCount[player]\n      });\n    });\n\n    setWinnerChartData(winnerChartData);\n    setRunnerChartData(runnerChartData);\n    setOutChartData(outChartData);\n\n    playerWinnerRunner?.sort((p1, p2) => p2?.winPercentage - p1?.winPercentage);\n\n    setPlayerWinnerRunner(playerWinnerRunner);\n\n    // accordion code\n    var acc = document.getElementsByClassName(\"accordion\");\n    var i;\n\n    for (i = 0; i < acc.length; i++) {\n      acc[i].addEventListener(\"click\", function() {\n        this.classList.toggle(\"active\");\n        var panel = this.nextElementSibling;\n        if (panel.style.display === \"block\") {\n          panel.style.display = \"none\";\n        } else {\n          panel.style.display = \"block\";\n        }\n      });\n    }\n  }, []);\n\n  return (\n    <div>\n      <br></br>\n      <div>\n        <button class=\"btn btn-success\" onClick={() => navigate(\"/dashboard\")}>Dashboard</button>\n      </div>\n      <br></br>\n      <div>\n        <button class=\"btn btn-success\" onClick={() => navigate(\"/gamehistory\")}>Game History</button>\n      </div>\n      {\n        playerWinnerRunner?.length > 0 && \n        // <div style={{width: '360px'}}>\n        <div>\n          <h1 className=\"mt-3\" style={{color: 'green'}}>Game Stats</h1>\n          <div className=\"mt-3\">{playerWinnerRunner[0]?.playerName} is All Time Winner <img src={WinnerCup} style={{width: '20px', height: '20px'}}></img></div>\n          <table class=\"table player-stats-table\">\n            <thead>\n              <tr>\n                <th>Player Name</th>\n                <th>Winner</th>\n                <th>Runner</th>\n                <th>Out</th>\n                <th>Games Played</th>\n                <th>Win %</th>\n                <th>Runner %</th>\n                <th>Out %</th>\n              </tr>\n            </thead>\n            <tbody>\n                {playerWinnerRunner?.map(player => \n                  <tr>\n                    <td>{player?.playerName}</td>\n                    <td>{player?.winner ? player?.winner : 0}</td>\n                    <td>{player?.runner ? player?.runner : 0}</td>\n                    <td>{player?.out ? player?.out : 0}</td>\n                    <td>{player?.gamesPlayed}</td>\n                    <td>{player?.winPercentage}</td>\n                    <td>{player?.runnerPercentage}</td>\n                    <td>{player?.outPercentage}</td>\n                  </tr>\n                )}\n              </tbody>\n          </table>\n          <h4 style={{marginTop: '50px', color: 'green'}}>Winner Chart</h4>\n          <PieChart\n            name='winner'\n            data={winnerChartData}\n            outerRadius={200}\n            innerRadius={100}\n          />\n          <h4 style={{marginTop: '50px', color: 'green'}}>Runner Chart</h4>\n          <PieChart\n            name='runner'\n            data={runnerChartData}\n            outerRadius={200}\n            innerRadius={100}\n          />\n          <h4 style={{marginTop: '50px', color: 'green'}}>Out Chart</h4>\n          <PieChart\n            name='out'\n            data={outChartData}\n            outerRadius={200}\n            innerRadius={100}\n          />\n        </div>\n      }\n      {\n        <div style={{marginBottom: '50px'}}>\n          <h3 style={{marginBottom: '25px', marginTop: '25px', color: 'green'}}>Win Combinations</h3>\n          {\n            Object?.keys(playerGameCombo)?.map((playerGameComboKey, idx) => {\n              const playersParticipated = playerGameComboKey?.split(',');\n              const playerStats = playerGameCombo[playerGameComboKey]?.playerStats;\n              return (\n                <>\n                  <button class=\"accordion mb-2\"><div style={{color: 'white'}}><b>{playersParticipated.join(', ')}</b></div></button>\n                  <div class=\"panel\">\n                    <div style={{marginBottom: '25px'}}>\n                      <div><b>Players</b>{playerGameComboKey?.split(',')?.map(player => <li>{player}</li>)}</div>\n                      <table class=\"table history-table\">\n                        <thead>\n                          <tr>\n                            {\n                              playersParticipated?.map((player, idx) => \n                                <th>\n                                  { idx == 0 ? 'Winner' : (idx == 1 ? 'Runner' : `Place - ${idx+1}`) }\n                                </th>\n                              )\n                            }\n                            <th>Wins</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {\n                            Object?.keys(playerGameCombo[playerGameComboKey]?.gameWinsCount)?.map(gameWin => {\n                              return (\n                                <tr>\n                                  {gameWin?.split(',')?.map((player, idx) => <td>{player}</td> )}\n                                  <td>{playerGameCombo[playerGameComboKey]?.gameWinsCount[gameWin]}</td>\n                                </tr>\n                              )\n                            })\n                          }\n                        </tbody>\n                      </table>\n                      <h4 style={{color: 'green'}}>Player Overall Stats</h4>\n                      <table class=\"table player-stats-table\">\n                        <thead>\n                          <tr>\n                            <th>Player Name</th>\n                            <th>Winner</th>\n                            <th>Runner</th>\n                            <th>Out</th>\n                            <th>Games Played</th>\n                            <th>Win %</th>\n                            <th>Runner %</th>\n                            <th>Out %</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                            {playerGameCombo[playerGameComboKey]?.playerWinnerRunner?.map(player => \n                              <tr>\n                                <td>{player?.playerName}</td>\n                                <td>{player?.winner ? player?.winner : 0}</td>\n                                <td>{player?.runner ? player?.runner : 0}</td>\n                                <td>{player?.out ? player?.out : 0}</td>\n                                <td>{player?.gamesPlayed}</td>\n                                <td>{player?.winPercentage}</td>\n                                <td>{player?.runnerPercentage}</td>\n                                <td>{player?.outPercentage}</td>\n                              </tr>\n                            )}\n                          </tbody>\n                      </table>\n                      <h4 style={{color: 'green'}}>Player Overall Stats by Seating (Dealer at the end)</h4>\n                      <table class=\"table player-stats-table\">\n                        <thead>\n                          <tr>\n                            <th>Player Seating</th>\n                            <th>Player Name</th>\n                            <th>Winner</th>\n                            <th>Runner</th>\n                            <th>Out</th>\n                            <th>Games Played</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {Object.keys(playerGameCombo[playerGameComboKey]?.playerSeatingCountStats)?.map((playerSeating, seatingIndex) => \n                            Object.keys(playerGameCombo[playerGameComboKey]?.playerSeatingCountStats[playerSeating]?.playerWinnerCount)?.map(player =>\n                              <tr key={`${playerSeating}-${player}`} className={seatingIndex % 2 === 0 ? 'even-group' : 'odd-group'}>\n                                <td>{playerSeating}</td>\n                                <td>{player}</td>\n                                <td>{playerGameCombo[playerGameComboKey]?.playerSeatingCountStats[playerSeating]?.playerWinnerCount[player]}</td>\n                                <td>{playerGameCombo[playerGameComboKey]?.playerSeatingCountStats[playerSeating]?.playerRunnerCount[player]}</td>\n                                <td>{playerGameCombo[playerGameComboKey]?.playerSeatingCountStats[playerSeating]?.playerOutCount[player]}</td>\n                                <td>{playerGameCombo[playerGameComboKey]?.playerSeatingCountStats[playerSeating]?.playerGameCount[player]}</td>\n                              </tr>\n                            )\n                          )}\n                        </tbody>\n                      </table>\n                      <h4 style={{color: 'green'}}>Player Overall Stats by Normalized Seating</h4>\n                      <table class=\"table player-stats-table\">\n                        <thead>\n                          <tr>\n                            <th>Player Seating</th>\n                            <th>Player Name</th>\n                            <th>Winner</th>\n                            <th>Runner</th>\n                            <th>Out</th>\n                            <th>Games Played</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {Object.keys(playerGameCombo[playerGameComboKey]?.playerNormalizedSeatingCountStats)?.map((playerSeating, seatingIndex) => \n                            Object.keys(playerGameCombo[playerGameComboKey]?.playerNormalizedSeatingCountStats[playerSeating]?.playerWinnerCount)?.map(player =>\n                              <tr key={`${playerSeating}-${player}`} className={seatingIndex % 2 === 0 ? 'even-group' : 'odd-group'}>\n                                <td>{playerSeating}</td>\n                                <td>{player}</td>\n                                <td>{playerGameCombo[playerGameComboKey]?.playerNormalizedSeatingCountStats[playerSeating]?.playerWinnerCount[player]}</td>\n                                <td>{playerGameCombo[playerGameComboKey]?.playerNormalizedSeatingCountStats[playerSeating]?.playerRunnerCount[player]}</td>\n                                <td>{playerGameCombo[playerGameComboKey]?.playerNormalizedSeatingCountStats[playerSeating]?.playerOutCount[player]}</td>\n                                <td>{playerGameCombo[playerGameComboKey]?.playerNormalizedSeatingCountStats[playerSeating]?.playerGameCount[player]}</td>\n                              </tr>\n                            )\n                          )}\n                        </tbody>\n                      </table>\n                      <h4 style={{color: 'green'}}>Player Round Stats</h4>\n                      <table class=\"table rummy-table\">\n                        <thead>\n                          <tr>\n                            <th>Player Name</th>\n                            <th>Rummys</th>\n                            <th>Drops</th>\n                            <th>Outs</th>\n                            <th>75s</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {\n                            playersParticipated?.map(player => (\n                              <tr>\n                                <td>{player}</td>\n                                <td>{playerStats[player]?.rummys}</td>\n                                <td>{playerStats[player]?.drops}</td>\n                                <td>{playerStats[player]?.outs}</td>\n                                <td>{playerStats[player]?.seventyFives}</td>\n                              </tr>\n                            ))\n                          }\n                        </tbody>\n                      </table>\n                      <h4 style={{color: 'green'}}>Player Dealer Stats</h4>\n                      <table class=\"table rummy-table\">\n                        <thead>\n                          <tr>\n                            <th>Player Name</th>\n                            <th>Game Starter (Dealer)</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {\n                            Object.keys(playerGameCombo[playerGameComboKey].playerDealerCount)\n                            ?.sort((p1, p2) => playerGameCombo[playerGameComboKey].playerDealerCount[p2] - playerGameCombo[playerGameComboKey].playerDealerCount[p1])\n                            ?.map(player => (\n                              <tr>\n                                <td>{player}</td>\n                                <td>{playerGameCombo[playerGameComboKey].playerDealerCount[player]}</td>\n                              </tr>\n                            ))\n                          }\n                        </tbody>\n                      </table>\n                      <h4 style={{color: 'green'}}>Player Seating Stats (Dealer at the end)</h4>\n                      <table class=\"table rummy-table\">\n                        <thead>\n                          <tr>\n                            <th>Player Seating</th>\n                            <th>Count</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {\n                            Object.keys(playerGameCombo[playerGameComboKey].playerSeatingCount)\n                            ?.sort((p1, p2) => playerGameCombo[playerGameComboKey].playerSeatingCount[p2] - playerGameCombo[playerGameComboKey].playerSeatingCount[p1])\n                            ?.map(player => (\n                              <tr>\n                                <td>{player}</td>\n                                <td>{playerGameCombo[playerGameComboKey].playerSeatingCount[player]}</td>\n                              </tr>\n                            ))\n                          }\n                        </tbody>\n                      </table>\n                      <h4 style={{color: 'green'}}>Player Normalized Seating Stats</h4>\n                      <table class=\"table rummy-table\">\n                        <thead>\n                          <tr>\n                            <th>Player Seating</th>\n                            <th>Count</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {\n                            Object.keys(playerGameCombo[playerGameComboKey].playerNormalizedSeatingCount)\n                            ?.sort((p1, p2) => playerGameCombo[playerGameComboKey].playerNormalizedSeatingCount[p2] - playerGameCombo[playerGameComboKey].playerNormalizedSeatingCount[p1])\n                            ?.map(player => (\n                              <tr>\n                                <td>{player}</td>\n                                <td>{playerGameCombo[playerGameComboKey].playerNormalizedSeatingCount[player]}</td>\n                              </tr>\n                            ))\n                          }\n                        </tbody>\n                      </table>\n                      <h4 style={{marginTop: '50px', color: 'green'}}>Winner Chart</h4>\n                      <PieChart\n                        name={`winner-${idx}`}\n                        data={playerGameCombo?.[playerGameComboKey]?.winnerChartData}\n                        outerRadius={200}\n                        innerRadius={100}\n                      />\n                      <h4 style={{marginTop: '50px', color: 'green'}}>Runner Chart</h4>\n                      <PieChart\n                        name={`runner-${idx}`}\n                        data={playerGameCombo?.[playerGameComboKey]?.runnerChartData}\n                        outerRadius={200}\n                        innerRadius={100}\n                      />\n                      <h4 style={{marginTop: '50px', color: 'green'}}>Out Chart</h4>\n                      <PieChart\n                        name={`out-${idx}`}\n                        data={playerGameCombo?.[playerGameComboKey]?.outChartData}\n                        outerRadius={200}\n                        innerRadius={100}\n                      />\n                    </div>\n                  </div>\n                </>\n              )\n            })\n          }\n        </div>\n      }\n      {/* <h2>Accordion</h2>\n\n      <button class=\"accordion\">Section 1</button>\n      <div class=\"panel\">\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>\n      </div>\n\n      <button class=\"accordion\">Section 2</button>\n      <div class=\"panel\">\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>\n      </div>\n\n      <button class=\"accordion\">Section 3</button>\n      <div class=\"panel\">\n        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>\n      </div> */}\n    </div>\n  );\n};\n\nexport default GameStats;","import React, { Fragment, useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { auth, db, deleteGame, getGameHistoryData } from \"../firebase\";\nimport ReadOnlyRow from \"./ReadOnlyRow\";\nimport WinnerCup from './../assets/winner-cup.png';\nimport { query, collection, getDocs, where } from \"firebase/firestore\";\n\nconst OldGame = (props) => {\n  const [user, loading, error] = useAuthState(auth);\n  const [name, setName] = useState(\"\");\n  const fetchUserName = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setName(data.name);\n    } catch (err) {\n      console.error(err);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n\n  const navigate = useNavigate();\n\n  const [game, setGame] = useState({});\n  const [players, setPlayers] = useState([]);\n\n  const [playerStats, setPlayerStats] = useState({});\n\n  const gameId = useParams().gameId;\n\n  useEffect(async () => {\n    fetchUserName();\n    const gameHistory = await getGameHistoryData();\n\n    const game = gameHistory.find(game => game.utcDateMS == gameId);\n\n    // const players = game?.playerRanking?.map(player => player.name);\n    const players = game?.players;\n    setGame(game);\n    setPlayers(players);\n\n    const playerStats = {};\n    players?.forEach(player => {\n      playerStats[player] = {\n        rummys: 0,\n        drops: 0,\n        outs: 0,\n        seventyFives: 0\n      }\n    });\n\n    game?.roundsData?.forEach(round => {\n      players?.forEach(player => {\n        const points = Number(round[player]);\n        if (points === 0) {\n          playerStats[player].rummys += 1;\n        } else if (points === 25) {\n          playerStats[player].drops += 1;\n        } else if (points > 25 && points < 75) {\n          playerStats[player].outs += 1;\n        }\n        if (points == 75) {\n          playerStats[player].seventyFives += 1;\n        }\n      });\n    });\n    console.log(playerStats);\n    setPlayerStats(playerStats);\n  }, []);\n\n  const handleDeleteGame = async () => {\n    deleteGame(game.docId);\n    navigate(\"/gamehistory\");\n  };\n\n  return (\n    <div>\n      <br></br>\n      <button class=\"btn btn-success my-1\" onClick={() => navigate(\"/dashboard\")}>Dashboard</button>\n      <br></br>\n      <button class=\"btn btn-success my-1\" onClick={() => navigate(\"/gamehistory\")}>Game History</button>\n      <br></br>\n      <button class=\"btn btn-success my-1\" onClick={() => navigate(\"/gamestats\")}>Game Stats</button>\n      <h2 className=\"my-3\" style={{color: 'green'}}>Game Played on {game?.date}</h2>\n      <h4>Playing Order</h4>\n      <ul>\n        {\n          players?.map(player => <li>{player} ({game?.playerRanking?.find(playerRank => playerRank.name === player).total})</li>)\n        }\n      </ul>\n      <h4>Player Ranking</h4>\n      <ul>\n        {\n          game?.playerRanking?.map(player => <li>{player.name} ({player.total})</li>)\n        }\n      </ul>\n      <h4>Rounds Played: {game?.rounds}</h4>\n      <h4>Winner: {game?.winner} <img src={WinnerCup} style={{width: '20px', height: '20px'}}></img></h4>\n      <h4>Runner: {game?.runner}</h4>\n      <h4 style={{color: 'green'}}>Game Details</h4>\n      <table class=\"table rummy-table\">\n        <thead>\n          <tr>\n            {players?.length > 0 && <th>Turn #</th>}\n            {players?.map(player => <th>{player}</th>)}\n          </tr>\n        </thead>\n        <tbody>\n          {game?.roundsData?.map((round, idx) => (\n            <Fragment>\n              <ReadOnlyRow\n                round={round}\n                roundIndex={idx}\n                players={players}\n                rounds={game?.roundsData}\n                oldGame={true}\n              />\n            </Fragment>\n          ))}\n          <tr class=\"total\">\n            <td><b>Total</b></td>\n            {\n              // game?.playerRanking?.map(player => <td>{player?.total}</td>)\n              players?.map(player => <td>{game?.playerRanking?.find(playerRank => playerRank.name === player).total}</td>)\n            }\n          </tr>\n        </tbody>\n      </table>\n      <h4 style={{color: 'green'}}>Player Round Stats</h4>\n      <table class=\"table rummy-table\">\n        <thead>\n          <tr>\n            <th>Player Name</th>\n            <th>Rummys</th>\n            <th>Drops</th>\n            <th>Outs</th>\n            <th>75s</th>\n          </tr>\n        </thead>\n        <tbody>\n          {\n            players?.map(player => (\n              <tr>\n                <td>{player}</td>\n                <td>{playerStats[player]?.rummys}</td>\n                <td>{playerStats[player]?.drops}</td>\n                <td>{playerStats[player]?.outs}</td>\n                <td>{playerStats[player]?.seventyFives}</td>\n              </tr>\n            ))\n          }\n        </tbody>\n      </table>\n      {\n        name === 'admin' &&\n        <button type=\"button\" class=\"btn btn-warning\" onClick={handleDeleteGame}>\n          Delete\n        </button>\n      }\n    </div>\n  );\n};\n\nexport default OldGame;\n","import { Container } from \"react-bootstrap\";\nimport { AuthProvider } from \"../contexts/AuthContext\";\nimport Signup from \"./Signup\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport Reset from \"./Reset\";\nimport Dashboard from \"./Dashboard\";\nimport NewGame from \"./NewGame\";\nimport RegisterPlayer from \"./RegisterPlayer\";\nimport GameHistory from \"./GameHistory\";\nimport GameStats from \"./GameStats\";\nimport OldGame from \"./OldGame\";\n\nfunction App() {\n  return (\n    <Container className=\"d-flex align-items-center justify-content-center\" style={{ minHeight: \"100vh\" }}>\n      <div className=\"w-100\" style={{ maxWidth: '700px' }}>\n        <Router basename=\"rummy-score-tracker\">\n          <AuthProvider>\n            <Routes>\n              {/* <Route path=\"/signup\" component={Signup}/> */}\n              <Route exact path=\"/\" element={<Login />} />\n              <Route exact path=\"/register\" element={<Register />} />\n              <Route exact path=\"/reset\" element={<Reset />} />\n              <Route exact path=\"/dashboard\" element={<Dashboard />} />\n              <Route exact path=\"/registerplayer\" element={<RegisterPlayer />} />\n              <Route exact path=\"/newgame\" element={<NewGame />} />\n              <Route exact path=\"/gamehistory\" element={<GameHistory />} />\n              <Route exact path=\"/gamestats\" element={<GameStats />} />\n              <Route exact path=\"/gamehistory/:gameId\" element={<OldGame />} />\n            </Routes>\n          </AuthProvider>\n        </Router>\n      </div>\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}